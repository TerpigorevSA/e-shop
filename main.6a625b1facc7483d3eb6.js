"use strict";(self.webpackChunke_shop=self.webpackChunke_shop||[]).push([[792],{606:(e,t,r)=>{r.d(t,{A:()=>i});var a=r(354),s=r.n(a),o=r(314),n=r.n(o)()(s());n.push([e.id,'body{margin:0;font-family:-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,Oxygen,Ubuntu,Cantarell,"Fira Sans","Droid Sans","Helvetica Neue",sans-serif;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale}code{font-family:source-code-pro,Menlo,Monaco,Consolas,"Courier New",monospace}',"",{version:3,sources:["webpack://./src/app/index.scss"],names:[],mappings:"AAAA,KACE,QAAA,CACA,2IAAA,CAEA,kCAAA,CACA,iCAAA,CAGF,KACE,yEAAA",sourcesContent:["body {\n  margin: 0;\n  font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell,\n    'Fira Sans', 'Droid Sans', 'Helvetica Neue', sans-serif;\n  -webkit-font-smoothing: antialiased;\n  -moz-osx-font-smoothing: grayscale;\n}\n\ncode {\n  font-family: source-code-pro, Menlo, Monaco, Consolas, 'Courier New', monospace;\n}\n"],sourceRoot:""}]);const i=n},3:(e,t,r)=>{var a=r(848),s=r(540),o=r(338),n=r(72),i=r.n(n),l=r(825),d=r.n(l),c=r(659),u=r.n(c),m=r(56),h=r.n(m),p=r(159),g=r.n(p),j=r(113),v=r.n(j),x=r(606),b={};b.styleTagTransform=v(),b.setAttributes=h(),b.insert=u().bind(null,"head"),b.domAPI=d(),b.insertStyleElement=g(),i()(x.A,b),x.A&&x.A.locals&&x.A.locals;var y=r(468),f=r(536),C=r(164),P=r(389);const S="https://19429ba06ff2.vps.myjino.ru",A="auth_token",_=()=>localStorage.getItem(A),N=()=>localStorage.getItem(A),E=e=>{localStorage.setItem(A,e)};var O=r(307);const w=(0,O.VP)("app/resetState"),R={token:null,isAuthenticated:!1},I=(0,O.Z0)({name:"auth",initialState:R,reducers:{setAuthenticated:(e,t)=>{e.token=t.payload,e.isAuthenticated=!!t.payload},signout:e=>{e.token=null,e.isAuthenticated=!1,localStorage.removeItem(A)}},extraReducers:e=>{e.addCase(w,(()=>R))}}),{setAuthenticated:F,signout:q}=I.actions,U=I.reducer;var D=r(816),L=r(378);const k="/__signIn",T=e=>"object"==typeof e&&null!==e&&"errors"in e&&Array.isArray(e.errors);var B,M;!function(e){e.ERR_INCORRECT_EMAIL_OR_PASSWORD="ERR_INCORRECT_EMAIL_OR_PASSWORD",e.ERR_ACCOUNT_ALREADY_EXIST="ERR_ACCOUNT_ALREADY_EXIST",e.ERR_FIELD_REQUIRED="ERR_FIELD_REQUIRED",e.ERR_INCORRECT_PASSWORD="ERR_INCORRECT_PASSWORD",e.ERR_INVALID_PASSWORD="ERR_INVALID_PASSWORD",e.ERR_NOT_VALID="ERR_NOT_VALID",e.ERR_AUTH="ERR_AUTH",e.ERR_NO_FILES="ERR_NO_FILES",e.ERR_NOT_ALLOWED="ERR_NOT_ALLOWED",e.ERR_NOT_FOUND="ERR_NOT_FOUND",e.ERR_VALIDATION_ERROR="ERR_VALIDATION_ERROR",e.ERR_INVALID_QUERY_PARAMS="ERR_INVALID_QUERY_PARAMS",e.ERR_INTERNAL_SERVER="ERR_INTERNAL_SERVER"}(B||(B={})),function(e){e.PendingConfirmation="pending_confirmation",e.Processing="processing",e.Packaging="packaging",e.WaitingForDelivery="waiting_for_delivery",e.InTransit="in_transit",e.Delivered="delivered",e.ReturnRequested="return_requested",e.OrderCancelled="order_cancelled"}(M||(M={}));const V=e=>T(e)?(e.errors.forEach((e=>{console.error(`Error [${e.extensions.code}]: ${e.message} ${(null==e?void 0:e.fieldName)||"common"}`),e.fieldName&&console.error(`Field: ${e.fieldName}`)})),e.errors.map((e=>(e=>{switch(e.extensions.code){case B.ERR_INCORRECT_EMAIL_OR_PASSWORD:return"ErrorCode.ERR_INCORRECT_EMAIL_OR_PASSWORD";case B.ERR_ACCOUNT_ALREADY_EXIST:return"ErrorCode.ERR_ACCOUNT_ALREADY_EXIST";case B.ERR_INCORRECT_PASSWORD:return"ErrorCode.ERR_INCORRECT_PASSWORD";case B.ERR_INVALID_PASSWORD:return"ErrorCode.ERR_INVALID_PASSWORD";default:return`${e.name}:\t${e.message}`}})(e)))):(console.error("Unhandled error:",e),[`Unknown error: ${e}`]);let W=null;const z=(0,L.cw)({baseUrl:"https://19429ba06ff2.vps.myjino.ru/api",prepareHeaders:e=>{const t=_();return t&&e.set("Authorization",`Bearer ${t}`),e}}),Y=(0,D.xP)({reducerPath:"/api",tagTypes:["Profile"],baseQuery:(e,t,r)=>{return a=void 0,s=void 0,n=function*(){const a=yield z(e,t,r);if(a.error){const e=a.error;return console.log("fetchError",e),"number"==typeof e.status&&(401===e.status&&(W?W(k,{state:void 0}):console.warn("Сервис не инициализирован.")),404===e.status||e.status>=500)?{error:e}:e.data?{error:V(e.data)}:{error:["Unknown error"]}}return a},new((o=void 0)||(o=Promise))((function(e,t){function r(e){try{l(n.next(e))}catch(e){t(e)}}function i(e){try{l(n.throw(e))}catch(e){t(e)}}function l(t){var a;t.done?e(t.value):(a=t.value,a instanceof o?a:new o((function(e){e(a)}))).then(r,i)}l((n=n.apply(a,s||[])).next())}));var a,s,o,n},endpoints:()=>({})}),Q=Y.injectEndpoints({endpoints:e=>({signin:e.mutation({query:e=>({url:"/signin",method:"POST",body:e}),invalidatesTags:["Profile"]}),signup:e.mutation({query:e=>({url:"/signup",method:"POST",body:e}),invalidatesTags:["Profile"]})})}),{useSigninMutation:J,useSignupMutation:$}=Q;var G=function(e,t,r,a){return new(r||(r=Promise))((function(s,o){function n(e){try{l(a.next(e))}catch(e){o(e)}}function i(e){try{l(a.throw(e))}catch(e){o(e)}}function l(e){var t;e.done?s(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(n,i)}l((a=a.apply(e,t||[])).next())}))};const H=()=>(0,a.jsx)("div",{className:"Loader-module_wrapper-S2fH0",children:(0,a.jsx)("div",{className:"Loader-module_spinner-LrzMb"})});var X=r(785);const Z="SignIn-module_label-pptK9",K="SignIn-module_error-FB1fs",ee="SignIn-module_input-IfOvj",te={wrapper:"Button-module_wrapper-jaU5z",button:"Button-module_button-PGwt3",buttonDisable:"Button-module_buttonDisable-tcTuI",buttonEnable:"Button-module_buttonEnable-Wvo8j"},re=({lable:e,className:t,disabled:r=!0,onClick:s=()=>{},type:o="button"})=>(0,a.jsx)("div",{className:te.wrapper,children:(0,a.jsx)("button",{className:(0,C.A)({[te.buttonDisable]:r,[te.buttonEnable]:!r,[t]:!r,[te.button]:!0}),disabled:r,type:o,onClick:"button"===o?s:void 0,children:e})}),ae=({onSubmit:e})=>{var t,r;const{register:s,handleSubmit:o,formState:{errors:n}}=(0,X.mN)(),{t:i}=(0,P.Bd)();return(0,a.jsxs)("form",{onSubmit:o(e),className:(0,C.A)("SignIn-module_form-xMDwc"),children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:(0,C.A)(Z),children:i("SignIn.email")}),(0,a.jsx)("input",Object.assign({className:(0,C.A)(ee,{[K]:n.email}),type:"email"},s("email",{required:i("SignIn.errors.emailRequired"),pattern:{value:/^\S+@\S+$/i,message:i("SignIn.errors.invalidEmail")}}),{placeholder:i("SignIn.emailPlaceholder")})),"string"==typeof(null===(t=null==n?void 0:n.email)||void 0===t?void 0:t.message)&&(0,a.jsx)("p",{className:K,children:n.email.message})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:(0,C.A)(Z),children:i("SignIn.password")}),(0,a.jsx)("input",Object.assign({className:(0,C.A)(ee,{[K]:n.password}),type:"password"},s("password",{required:i("SignIn.errors.passwordRequired")}),{placeholder:i("SignIn.passwordPlaceholder")})),"string"==typeof(null===(r=null==n?void 0:n.password)||void 0===r?void 0:r.message)&&(0,a.jsx)("p",{className:K,children:n.password.message})]}),(0,a.jsx)(re,{className:"SignIn-module_button-IefxO",lable:i("SignIn.button"),type:"submit",disabled:!1})]})},se=({onSignOut:e})=>((0,s.useEffect)((()=>{e()}),[]),(0,a.jsx)(f.C5,{to:"/",replace:!0})),oe="SignUp-module_label-sA4I1",ne="SignUp-module_error-SZzxU",ie="SignUp-module_input-jkqgj",le=({onSubmit:e})=>{var t,r,s;const{register:o,handleSubmit:n,watch:i,formState:{errors:l}}=(0,X.mN)(),d=i("password"),{t:c}=(0,P.Bd)();return(0,a.jsxs)("form",{onSubmit:n(e),className:(0,C.A)("SignUp-module_form-gWSk6"),children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:oe,children:c("SignUp.email")}),(0,a.jsx)("input",Object.assign({className:(0,C.A)(ie,{[ne]:l.email}),type:"email"},o("email",{required:c("SignUp.errors.emailRequired"),pattern:{value:/^\S+@\S+$/i,message:c("SignUp.errors.invalidEmail")}}),{placeholder:c("SignUp.emailPlaceholder")})),"string"==typeof(null===(t=null==l?void 0:l.email)||void 0===t?void 0:t.message)&&(0,a.jsx)("p",{className:ne,children:l.email.message})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:oe,children:c("SignUp.password")}),(0,a.jsx)("input",Object.assign({className:(0,C.A)(ie,{[ne]:l.password}),type:"password"},o("password",{required:c("SignUp.errors.passwordRequired"),minLength:{value:8,message:c("SignUp.errors.passwordLength",{passwordLength:8})}}),{placeholder:c("SignUp.passwordPlaceholder")})),"string"==typeof(null===(r=null==l?void 0:l.password)||void 0===r?void 0:r.message)&&(0,a.jsx)("p",{className:ne,children:l.password.message})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:oe,children:c("SignUp.confirmPassword")}),(0,a.jsx)("input",Object.assign({className:(0,C.A)(ie,{[ne]:l.confirmPassword}),type:"password"},o("confirmPassword",{required:c("SignUp.errors.confirmPasswordRequired"),validate:e=>e===d||c("SignUp.errors.confirmPasswordMatch")}),{placeholder:c("SignUp.confirmPasswordPlaceholder")})),"string"==typeof(null===(s=null==l?void 0:l.confirmPassword)||void 0===s?void 0:s.message)&&(0,a.jsx)("p",{className:ne,children:l.confirmPassword.message})]}),(0,a.jsx)(re,{className:"SignUp-module_button-OY8i_",lable:c("SignUp.button"),type:"submit",disabled:!1})]})};var de;!function(e){e.SignIn="signIn",e.SignUp="signUp",e.SignOut="signOut"}(de||(de={}));const ce=({authAction:e})=>{const{t}=(0,P.Bd)(),r=(0,f.Zp)(),[o,n]=s.useState(!1),{signIn:i,signUp:l,signOut:d,isLoading:c,error:u}=(()=>{const e=(0,y.wA)(),[t,{isLoading:r,isError:a,error:s}]=J(),[o,{isLoading:n,isError:i,error:l}]=$();return{signIn:(r,a)=>G(void 0,void 0,void 0,(function*(){const s=yield t({email:r,password:a});s.data&&(E(s.data.token),e(F(s.data.token)))})),signUp:(t,r)=>G(void 0,void 0,void 0,(function*(){const a=yield o({email:t,password:r,commandId:"6d4672bc-6245-4b6b-a4c4-acdb6cf3fc89"});a.data&&(E(a.data.token),e(F(a.data.token)))})),signOut:()=>{e(q())},isLoading:r||n,isError:a||i,error:[...a?s:[],...i?l:[]]}})();if((0,s.useEffect)((()=>{!o||c||u&&0!==u.length||r(-1)}),[o,c,u]),c)return(0,a.jsx)(H,{});const m=(0,a.jsx)(a.Fragment,{children:e===de.SignIn&&(0,a.jsx)(ae,{onSubmit:(e,t)=>{null==t||t.preventDefault(),i(e.email,e.password),n(!0)}})}),h=(0,a.jsx)(a.Fragment,{children:e===de.SignUp&&(0,a.jsx)(le,{onSubmit:(e,t)=>{null==t||t.preventDefault(),l(e.email,e.password)}})}),p=(0,a.jsx)(a.Fragment,{children:e===de.SignOut&&(0,a.jsx)(se,{onSignOut:()=>d()})});return(0,a.jsxs)("div",{className:(0,C.A)("AuthScreen-module_page-zMGiZ"),children:[(0,a.jsxs)("div",{children:[m,h,p]}),u&&(0,a.jsx)("div",{className:"AuthScreen-module_error-lHQIo",children:u.map((e=>t(e))).join("\n")})]})},ue="Layout-module_item-gd4xx",me=r.p+"images/shopping_cart_24dp_5F6368_FILL0_wght400_GRAD0_opsz2424c53ed0aa95d07ec1ba.svg",he=()=>{const e=(0,y.d4)((e=>{var t,r;return null!==(r=null===(t=e.cart.currentCartEntries)||void 0===t?void 0:t.length)&&void 0!==r?r:0}));return(0,a.jsxs)("div",{className:"CartIndicator-module_wrapper-eBqaf",children:[(0,a.jsx)("img",{src:me,alt:"cart",className:"CartIndicator-module_image-P3JZr"}),e>0&&(0,a.jsx)("span",{className:"CartIndicator-module_badge-rBQwu",children:e})]})},pe=({children:e})=>(0,a.jsx)("div",{className:"Header-module_header-RNmb8",children:e}),ge="LanguageSwitcher-module_button-c0qjh";var je=r(635),ve=r(997);const xe=JSON.parse('{"category":{"photo_alt":"Категория {{name}}"},"operation":{"amount":"{{amount, currency}}","description_undefined":"undefined"},"product":{"price":"{{price, currency}}","oldPrice":"{{oldPrice, currency}}","description_undefined":"undefined","photo_alt":"Product {{name}}"},"OperationDetail":{"edit":"Edit"},"ProductDetail":{},"ProductItem":{},"CartButton":{"button":"Add to cart"},"CartItem":{"button":"Remove"},"EditProfile":{"title":"Profile editing","userName":"Name","userNamePlaceholder":"Enter name","about":"Description","aboutPlaceholder":"Enter description","button":"Save","errors":{"userNameRequired":"Name is required"}},"ChangePassword":{"title":"Password change","oldPassword":"Old password","oldPasswordPlaceholder":"Enter old password","newPassword":"New password","newPasswordPlaceholder":"Enter new password","confirmPassword":"Confirm password","confirmPasswordPlaceholder":"Confirm password","button":"Save","errors":{"oldPasswordRequired":"Old password is required","newPasswordRequired":"New password is required","confirmPasswordRequired":"Password confirmation is required","confirmPasswordMatch":"Passwords do not match"}},"ProfileScreen":{"title":"Profile"},"SignIn":{"title":"Sign In","email":"Email","emailPlaceholder":"Enter your email","password":"Password","passwordPlaceholder":"Enter your password","button":"Log In","errors":{"emailRequired":"Email is required","invalidEmail":"Invalid email","passwordRequired":"Password is required"}},"SignUp":{"title":"Sign Up","email":"Email","emailPlaceholder":"Enter your email","password":"Password","passwordPlaceholder":"Enter your password","confirmPassword":"Confirm Password","confirmPasswordPlaceholder":"Confirm your password","button":"Register","errors":{"emailRequired":"Email is required","invalidEmail":"Invalid email","passwordRequired":"Password is required","passwordLength":"Password must be at least {{passwordLength}} characters long","confirmPasswordRequired":"Password confirmation is required","confirmPasswordMatch":"Passwords do not match"}},"ProductEdit":{"name":"Name","namePlaceholder":"Enter name","photos":"Photos","photo":"Photo","photoPlaceholder":"Enter photo URL","addPhoto":"Add photo","removePhoto":"Remove","description":"Description","descriptionPlaceholder":"Enter description","price":"Price","pricePlaceholder":"Enter price","oldPrice":"Old Price","oldPricePlaceholder":"Enter old price","category":"Category","selectCategory":"Select category","errors":{"nameRequired":"Name is required","photosRequired":"Photo is required","photosInvalid":"Each URL must be valid","priceRequired":"Price is required","priceMin":"Price must be at least 0","categoryRequired":"Category is required","uploadError":"Failed to upload file. Try again."},"button":"Save"},"CategoryEdit":{"name":"Name","namePlaceholder":"Enter name","photos":"Photos","photo":"Photo","photoPlaceholder":"Enter photo URL","addPhoto":"Add photo","errors":{"nameRequired":"Name is required","photosRequired":"Photo is required","photosInvalid":"Each URL must be valid","priceRequired":"Price is required","uploadError":"Failed to upload file. Try again."},"button":"Save"},"AuthScreen":{"signOut":"Sign Out"},"Routes":{"Profile":{"label":"Profile"},"Auth":{"label":"Authorization","SignIn":{"label":"Sign In"},"SignUp":{"label":"Sign Up"},"SignOut":{"label":"Sign Out"}},"AuthByQuery":{"label":"Authorization by RTK Query","SignIn":{"label":"Sign In"},"SignUp":{"label":"Sign Up"},"SignOut":{"label":"Sign Out"}},"Catalog":{"label":"Catalog"},"Cart":{"label":"Cart"},"Edit":{"label":"Edit","Products":{"label":"Products"},"Categories":{"label":"Categories"},"Orders":{"label":"Orders"}},"Home":{"label":"Home"},"UserOrders":{"label":"Orders"}},"ErrorCode":{"ERR_ACCOUNT_ALREADY_EXIST":"An account with this email address already exists.","ERR_INCORRECT_EMAIL_OR_PASSWORD":"Incorrect email or password.","ERR_INCORRECT_PASSWORD":"Incorrect password.","ERR_INVALID_PASSWORD":"The password does not meet security requirements."},"CommonError":{"UnexpectedError":"Unexpected error. Please try again."},"CartScreen":{"cart":"Cart","loading":"Loading...","emptyCart":"Cart is empty","totalTitle":"Total","total":"{{total, currency}}","clear":"Clear","checkoutButton":"Checkout"},"OrderItem":{"createdAt":"Created at: {{createdAt, date}}","updatedAt":"Updated at: {{updatedAt, date}}","status":"Status: {{status}}","totalPrice":"Total Price: {{totalPrice, currency}}"},"OrderProductItem":{"price":"Price: {{price, currency}}","quantity":"Quantity: {{quantity}}"},"OrderStatus":{"pending_confirmation":" pending confirmation","processing":" processing","packaging":" packaging","waiting_for_delivery":" waiting for delivery","in_transit":" in transit","delivered":" delivered","return_requested":" return requested","order_cancelled":" order cancelled"},"ProductFiltersSchema":{"isValidCategory":"Category is missing"},"CommonFiltersFormSchema":{"dateIntervalSchema":{"LteLessGte":"The \'From\' date must be earlier than the \'To\' date"}},"CommonFiltersForm":{"createdAt":{"label":"Created","from":"From","by":"To"},"updatedAt":{"label":"Updated","from":"From","by":"To"},"sorting":{"label":"Sorting","byField":"By field","field":{"noSorting":"No sorting","id":"ID","createdAt":"Creation date","updatedAt":"Update date","name":"Name"},"direction":"Direction","type":{"ASC":"Ascending","DESC":"Descending"}},"resetButton":"Reset filters","submitButton":"Apply filters","errors":{"validations":"Validation errors"}},"CatalogFiltersForm":{"category":{"label":"Category","noCategory":"Do not filter"}},"UserOrdersFiltersForm":{"status":{"label":"Status","noStatus":"Do not filter"}},"OrdersFiltersForm":{"status":{"label":"Status","noStatus":"Do not filter"}},"ProductsFiltersForm":{"category":{"label":"Category","noCategory":"Do not filter"}}}'),be=JSON.parse('{"categoty":{"photo_alt":"Категория {{name}}"},"operation":{"amount":"{{amount, currency}}","description_undefined":"неописуемо"},"product":{"price":"{{price, currency}}","oldPrice":"{{oldPrice, currency}}","description_undefined":"неописуемо","photo_alt":"Продукт {{name}}"},"OperationDetail":{"edit":"Редактировать"},"ProductDetail":{},"ProductItem":{},"CartButton":{"button":"В корзину"},"CartItem":{"button":"Удалить"},"EditProfile":{"title":"Редактирование профиля","userName":"Имя","userNamePlaceholder":"Введите имя","about":"Описание","aboutPlaceholder":"Введите описание","button":"Сохранить","errors":{"userNameRequired":"Имя обязательно"}},"ChangePassword":{"title":"Смена пароля","oldPassword":"Старый пароль","oldPasswordPlaceholder":"Введите старый пароль","newPassword":"Новый пароль","newPasswordPlaceholder":"Введите новый пароль","confirmPassword":"Подтвердите пароль","confirmPasswordPlaceholder":"Подтвердите пароль","button":"Сохранить","errors":{"oldPasswordRequired":"Старый пароль обязателен","newPasswordRequired":"Новый пароль обязателен","confirmPasswordRequired":"Подтверждение пароля обязательно","confirmPasswordMatch":"Пароли не совпадают"}},"ProfileScreen":{"title":"Профиль"},"SignIn":{"title":"Вход","email":"Email","emailPlaceholder":"Введите email","password":"Пароль","passwordPlaceholder":"Введите пароль","button":"Войти","errors":{"emailRequired":"Email обязателен","invalidEmail":"Некорректный email","passwordRequired":"Пароль обязателен"}},"SignUp":{"title":"Регистрация","email":"Email","emailPlaceholder":"Введите email","password":"Пароль","passwordPlaceholder":"Введите пароль","confirmPassword":"Подтвердите пароль","confirmPasswordPlaceholder":"Подтвердите пароль","button":"Зарегистрироваться","errors":{"emailRequired":"Email обязателен","invalidEmail":"Некорректный email","passwordRequired":"Пароль обязателен","passwordLength":"Пароль должен быть не менее {{passwordLength}} символов","confirmPasswordRequired":"Подтверждение пароля обязательно","confirmPasswordMatch":"Пароли не совпадают"}},"ProductEdit":{"name":"Имя","namePlaceholder":"Введите имя","photos":"Фотографии","photo":"Фотография","photoPlaceholder":"Введите URL фотографии","addPhoto":"Добавить фото","removePhoto":"Удалить","description":"Описание","descriptionPlaceholder":"Введите описание","price":"Цена","pricePlaceholder":"Введите цену","oldPrice":"Старая цена","oldPricePlaceholder":"Введите старую цену","category":"Категория","selectCategory":"Выберите категорию","errors":{"nameRequired":"Имя обязательно","photosRequired":"Укажите фотографию","photosInvalid":"Каждая ссылка должна быть корректным URL","priceRequired":"Цена обязательна","priceMin":"Цена должна быть не меньше 0","categoryRequired":"Категория обязательна","uploadError":"\'Не удалось загрузить файл. Попробуйте еще раз.\'"},"button":"Сохранить"},"CategoryEdit":{"name":"Имя","namePlaceholder":"Введите имя","photos":"Фотографии","photo":"Фотография","photoPlaceholder":"Введите URL фотографии","addPhoto":"Добавить фото","errors":{"nameRequired":"Имя обязательно","photosRequired":"Укажите фотографию","photosInvalid":"Каждая ссылка должна быть корректным URL","priceRequired":"Цена обязательна","uploadError":"\'Не удалось загрузить файл. Попробуйте еще раз.\'"},"button":"Сохранить"},"AuthScreen":{"signOut":"Выйти"},"Routes":{"Profile":{"label":"Профиль"},"Auth":{"label":"Авторизация","SignIn":{"label":"Вход"},"SignUp":{"label":"Регистрация"},"SignOut":{"label":"Выход"}},"AuthByQuery":{"label":"Авторизация через RTK Query","SignIn":{"label":"Вход"},"SignUp":{"label":"Регистрация"},"SignOut":{"label":"Выход"}},"Catalog":{"label":"Каталог"},"Cart":{"label":"Корзина"},"Edit":{"label":"Редактирование","Products":{"label":"Товары"},"Categories":{"label":"Категории"},"Orders":{"label":"Заказы"}},"Home":{"label":"Главная"},"UserOrders":{"label":"Заказы"}},"ErrorCode":{"ERR_ACCOUNT_ALREADY_EXIST":"Аккаунт с таким адресом электронной почты уже существует.","ERR_INCORRECT_EMAIL_OR_PASSWORD":"Неверный адрес электронной почты или пароль.","ERR_INCORRECT_PASSWORD":"Неверный пароль.","ERR_INVALID_PASSWORD":"Пароль не соответствует требованиям безопасности."},"CommonError":{"UnexpectedError":"Неожиданная ошибка. Пожалуйста, повторите попытку."},"CartScreen":{"cart":"Корзина","loading":"Загрузка...","emptyCart":"Корзина пуста","totalTitle":"Итого","total":"{{total, currency}}","clear":"Очистить","checkoutButton":"Оформить заказ"},"OrderItem":{"createdAt":"Создан: {{createdAt, date}}","updatedAt":"Обновлен: {{updatedAt, date}}","status":"Статус: {{status}}","totalPrice":"Общая стоимость: {{totalPrice, currency}}"},"OrderProductItem":{"price":"Цена: {{price, currency}}","quantity":"Количество: {{quantity}}"},"OrderStatus":{"pending_confirmation":"ожидание подтверждения","processing":"обработка","packaging":"упаковка","waiting_for_delivery":"ожидание вручения","in_transit":"в пути","delivered":"доставлено","return_requested":"требуется возврат","order_cancelled":"заказ отменен"},"ProductFiltersSchema":{"isValidCategory":"Категория отсутствуе"},"CommonFiltersFormSchema":{"dateIntervalSchema":{"LteLessGte":"Дата \\"С\\" должна быть меньше даты \\"До\\""}},"CommonFiltersForm":{"createdAt":{"label":"Создан","from":"С","by":"До"},"updatedAt":{"label":"Обновлён","from":"С","by":"До"},"sorting":{"label":"Сортировка","byField":"По полю","field":{"noSorting":"Без сортировки","id":"ID","createdAt":"Дата создания","updatedAt":"Дата обновления","name":"Имя"},"direction":"Направление","type":{"ASC":"Возростания","DESC":"Убывания"}},"resetButton":"Сбросить фильтры","submitButton":"Применить фильтры","errors":{"validations":"Ошибки валидации"}},"CatalogFiltersForm":{"category":{"label":"Категории","noCategory":"Не фильтровать"}},"UserOrdersFiltersForm":{"status":{"label":"Статус","noStatus":"Не фильтровать"}},"OrdersFiltersForm":{"status":{"label":"Статус","noStatus":"Не фильтровать"}},"ProductsFiltersForm":{"category":{"label":"Категории","noCategory":"Не фильтровать"}}}');var ye;!function(e){e.en="en",e.ru="ru"}(ye||(ye={})),je.Ay.use(ve.A).use(P.r9).init({resources:{en:{translation:xe},ru:{translation:be}},fallbackLng:ye.ru,interpolation:{format:(e,t,r)=>{if("currency"===t){const t={style:"currency",currency:"RUB",currencyDisplay:"symbol"};return new Intl.NumberFormat(r,t).format(e).replace("RUB","₽")}if("date"===t){const t="string"==typeof e?new Date(e):e;return new Intl.DateTimeFormat(r).format(t)}return e},escapeValue:!1}});const fe=(0,s.createContext)(void 0),Ce=()=>{const{currentLanguage:e,switchLanguage:t}=(()=>{const e=(0,s.useContext)(fe);if(!e)throw new Error("useLanguage must be used within a LanguageProvider");return e})();return(0,a.jsxs)("div",{className:"LanguageSwitcher-module_wrapper-ZGK3y",children:[(0,a.jsx)("button",{className:ge,onClick:()=>t(ye.en),hidden:e===ye.en,children:"English"}),(0,a.jsx)("button",{className:ge,onClick:()=>t(ye.ru),hidden:e===ye.ru,children:"Русский"})]})},Pe=({to:e})=>{const t=(0,f.Zp)();return(0,a.jsx)("div",{className:"Logo-module_wrapper-GfSRC",onClick:()=>e?t(e,{replace:!0}):null,children:(0,a.jsx)("div",{className:"Logo-module_caption-ICMS_",children:(0,a.jsx)("span",{style:{cursor:"pointer"},children:"Logo"})})})},Se="NavigationBar-module_link-E8usD";var Ae;!function(e){e.Authenticated="Authenticated",e.Unauthenticated="Unauthenticated",e.AdminAuthenticated="AdminAuthenticated"}(Ae||(Ae={}));const _e=({children:e,authenticationState:t,routes:r})=>{const s=(0,y.d4)((e=>e.auth.isAuthenticated));return(0,a.jsxs)(a.Fragment,{children:[t===Ae.AdminAuthenticated&&s&&e,t===Ae.Authenticated&&s&&e,t===Ae.Unauthenticated&&!s&&e,void 0===t&&e,t===Ae.Authenticated&&!s||t===Ae.AdminAuthenticated&&!s&&(0,a.jsx)(f.C5,{to:r.signIn,replace:!0}),t===Ae.Unauthenticated&&s&&(0,a.jsx)(f.C5,{to:r.root,replace:!0})]})},Ne=e=>t=>{const r=(0,y.d4)((e=>e.auth.isAuthenticated)),{authenticationState:s}=t,o=function(e,t){var r={};for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&t.indexOf(a)<0&&(r[a]=e[a]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var s=0;for(a=Object.getOwnPropertySymbols(e);s<a.length;s++)t.indexOf(a[s])<0&&Object.prototype.propertyIsEnumerable.call(e,a[s])&&(r[a[s]]=e[a[s]])}return r}(t,["authenticationState"]);return(0,a.jsxs)(a.Fragment,{children:[s===Ae.AdminAuthenticated&&r&&(0,a.jsx)(e,Object.assign({},o)),s===Ae.Authenticated&&r&&(0,a.jsx)(e,Object.assign({},o)),s===Ae.Unauthenticated&&!r&&(0,a.jsx)(e,Object.assign({},o)),void 0===s&&(0,a.jsx)(e,Object.assign({},o))]})},Ee=({menuItems:e})=>{const{t}=(0,P.Bd)(),r=Ne(f.k2);return(0,a.jsx)("nav",{className:"NavigationBar-module_navbar-pUcxv",children:e.map((e=>{var s;return(0,a.jsxs)("div",{className:"NavigationBar-module_navItem-AIzLO",children:[(0,a.jsx)(r,{to:null!==(s=e.path)&&void 0!==s?s:"",authenticationState:e.authenticationState,className:Se,children:t(e.label)}),e.dropdown&&(0,a.jsx)("div",{className:"NavigationBar-module_dropdown-poSm4",children:e.dropdown.map((e=>{var s;return(0,a.jsx)(r,{to:null!==(s=e.path)&&void 0!==s?s:"",authenticationState:e.authenticationState,className:Se,children:t(e.label)},e.label)}))})]},e.label)}))})},Oe=r.p+"images/dark_mode_24dp_5F6368_FILL0_wght400_GRAD0_opsz240cf94b2413694c8f1b93.svg",we=r.p+"images/light_mode_24dp_5F6368_FILL0_wght400_GRAD0_opsz246bf81f79e0db216c1e23.svg",Re="light",Ie=(0,s.createContext)(void 0),Fe=()=>{const{theme:e,toggleTheme:t}=(()=>{const e=(0,s.useContext)(Ie);if(!e)throw new Error("useTheme must be used within a ThemeProvider");return e})();return(0,a.jsx)("div",{className:"ThemeSwitcher-module_wrapper-nNVOS",children:(0,a.jsx)("button",{className:"ThemeSwitcher-module_button-vE6bM",onClick:()=>t(),children:(0,a.jsx)("img",{src:e===Re?Oe:we})})})},qe=({menuItems:e})=>(0,a.jsxs)("div",{className:(0,C.A)("Layout-module_layout-CNEYr"),children:[(0,a.jsxs)(pe,{children:[(0,a.jsx)("div",{className:ue,children:(0,a.jsx)(Pe,{to:"/"})}),(0,a.jsx)("div",{className:ue,children:(0,a.jsx)(Ee,{menuItems:e})}),(0,a.jsxs)("div",{className:"Layout-module_rightWrapper-OfgHI",children:[(0,a.jsx)("div",{className:ue,children:(0,a.jsx)(he,{})}),(0,a.jsx)("div",{className:ue,children:(0,a.jsx)(Fe,{})}),(0,a.jsx)("div",{className:ue,children:(0,a.jsx)(Ce,{})})]})]}),(0,a.jsx)("div",{className:"Layout-module_content-RemCP",children:(0,a.jsx)(f.sv,{})})]}),Ue="EditOrderItem-module_row-zdgCN",De="EditOrderItem-module_value-ncFgD",Le=(0,s.memo)((({createdAt:e,updatedAt:t,status:r,totalPrice:s,id:o,email:n,onStatusChange:i})=>{const{t:l}=(0,P.Bd)();return(0,a.jsxs)("div",{className:"EditOrderItem-module_orderItem-qiaJd",children:[(0,a.jsxs)("div",{className:Ue,children:[(0,a.jsx)("span",{children:o}),(0,a.jsx)("span",{children:n})]}),(0,a.jsxs)("div",{className:Ue,children:[(0,a.jsx)("span",{className:"EditOrderItem-module_label-dkaLl",children:l("OrderItem.createdAt",{createdAt:e})}),(0,a.jsx)("span",{className:De,children:l("OrderItem.totalPrice",{totalPrice:s})})]}),(0,a.jsxs)("div",{className:Ue,children:[(0,a.jsx)("select",{value:r,onChange:e=>{i(e.target.value)},className:"EditOrderItem-module_statusSelect-wrBRh",children:Object.values(M).map((e=>(0,a.jsx)("option",{value:e,children:l(`OrderStatus.${e}`)},e)))}),(0,a.jsx)("span",{className:De,children:l("OrderItem.updatedAt",{updatedAt:t})})]})]})})),ke=(0,s.memo)((({items:e,render:t,doFetch:r,oneObserve:o})=>{const n=(0,s.useRef)(null);return function(e,t,r,a=!0){(0,s.useEffect)((()=>{const s=new IntersectionObserver((([r])=>{r.isIntersecting&&(t(),a&&(e.current=null))}),r),o=e.current;return o&&s.observe(o),()=>{o&&s.unobserve(o)}}),[r,e,a,t])}(n,r,{threshold:.5},o),(0,a.jsx)(a.Fragment,{children:e.map(((r,s)=>(0,a.jsx)("div",{ref:s===e.length-2?n:null,children:t(r)},s)))})})),Te="OrdersEditScreen-module_selectedOrder-rc_Ic";var Be=r(664);const Me=Be.Ik({name:Be.Yj().optional(),ids:Be.YO().optional(),productIds:Be.YO().optional(),userId:Be.Yj().optional(),status:Be.gl().oneOf([M.Delivered,M.InTransit,M.OrderCancelled,M.Packaging,M.PendingConfirmation,M.Processing,M.ReturnRequested,M.WaitingForDelivery]).optional()}),Ve="CommonFiltersForm-module_label-pH_Pa",We="CommonFiltersForm-module_subLabel-ZXhWp",ze="CommonFiltersForm-module_error-fHA0c",Ye="CommonFiltersForm-module_input-KAW2t",Qe="CommonFiltersForm-module_select-nV_9U",Je="CommonFiltersForm-module_button-hko8I",$e="CommonFiltersForm-module_clearButton-slLSF",Ge=Be.Ik({gte:Be.Yj().optional(),lte:Be.Yj().optional().when("gte",(([e],t)=>e?t.test("date-order","CommonFiltersFormSchema.dateIntervalSchema.LteLessGte",(t=>!t||new Date(e)<new Date(t))):t))}),He=Be.Ik({pagination:Be.Ik({pageSize:Be.ai().integer().min(1).optional(),pageNumber:Be.ai().integer().min(1).optional()}).optional(),createdAt:Ge.optional(),updatedAt:Ge.optional(),sorting:Be.Ik({type:Be.gl().oneOf(["ASC","DESC"]),field:Be.gl().oneOf(["id","createdAt","updatedAt","name"])}).noUnknown().optional()});const Xe=({onChange:e,initialFilters:t,childrenSchema:r,children:o})=>{var n,i,l,d,c,u;const m=r?He.concat(r):He,{t:h}=(0,P.Bd)(),[p,g]=(0,s.useState)(t),[j,v]=(0,s.useState)({}),x=(e,t)=>{g(Object.assign(Object.assign({},p),{[e]:t}))};return(0,a.jsxs)("form",{className:(0,C.A)("CommonFiltersForm-module_form-T7FCc"),onSubmit:t=>{return r=void 0,a=void 0,o=function*(){t.preventDefault(),v({}),m.validate(p,{abortEarly:!1}).then((()=>{e(p)})).catch((e=>{if(console.error(h("CommonFiltersForm.errors.validations"),e.errors),e instanceof Be.yI){const t={};e.inner.forEach((e=>{e.path&&(t[e.path]=e.message)})),v(t)}}))},new((s=void 0)||(s=Promise))((function(e,t){function n(e){try{l(o.next(e))}catch(e){t(e)}}function i(e){try{l(o.throw(e))}catch(e){t(e)}}function l(t){var r;t.done?e(t.value):(r=t.value,r instanceof s?r:new s((function(e){e(r)}))).then(n,i)}l((o=o.apply(r,a||[])).next())}));var r,a,s,o},children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:(0,C.A)(Ve),children:h("CommonFiltersForm.createdAt.label")}),(0,a.jsxs)("label",{className:(0,C.A)(We),children:[h("CommonFiltersForm.createdAt.from"),(0,a.jsxs)("div",{style:{flexDirection:"row",display:"flex"},children:[(0,a.jsx)("input",{className:(0,C.A)(Ye),type:"datetime-local",value:(null===(n=null==p?void 0:p.createdAt)||void 0===n?void 0:n.gte)||"",onChange:e=>x("createdAt",Object.assign(Object.assign({},null==p?void 0:p.createdAt),{gte:e.target.value}))}),(0,a.jsx)("button",{className:(0,C.A)($e),type:"button",onClick:()=>x("createdAt",Object.assign(Object.assign({},null==p?void 0:p.createdAt),{gte:void 0})),children:"X"})]})]}),(0,a.jsxs)("label",{className:(0,C.A)(We),children:[h("CommonFiltersForm.createdAt.by"),(0,a.jsxs)("div",{style:{flexDirection:"row",display:"flex"},children:[(0,a.jsx)("input",{className:(0,C.A)(Ye),type:"datetime-local",value:(null===(i=null==p?void 0:p.createdAt)||void 0===i?void 0:i.lte)||"",onChange:e=>x("createdAt",Object.assign(Object.assign({},null==p?void 0:p.createdAt),{lte:e.target.value}))}),(0,a.jsx)("button",{className:(0,C.A)($e),type:"button",onClick:()=>x("createdAt",Object.assign(Object.assign({},null==p?void 0:p.createdAt),{lte:void 0})),children:"X"})]})]}),j["createdAt.lte"]&&(0,a.jsx)("p",{className:(0,C.A)(ze),children:h(j["createdAt.lte"])})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:(0,C.A)(Ve),children:h("CommonFiltersForm.updatedAt.label")}),(0,a.jsxs)("label",{className:(0,C.A)(We),children:[h("CommonFiltersForm.updatedAt.from"),(0,a.jsxs)("div",{style:{flexDirection:"row",display:"flex"},children:[(0,a.jsx)("input",{className:(0,C.A)(Ye),type:"datetime-local",value:(null===(l=null==p?void 0:p.updatedAt)||void 0===l?void 0:l.gte)||"",onChange:e=>x("updatedAt",Object.assign(Object.assign({},null==p?void 0:p.updatedAt),{gte:e.target.value}))}),(0,a.jsx)("button",{className:(0,C.A)($e),type:"button",onClick:()=>x("updatedAt",Object.assign(Object.assign({},null==p?void 0:p.updatedAt),{gte:void 0})),children:"X"})]})]}),(0,a.jsxs)("label",{className:(0,C.A)(We),children:[h("CommonFiltersForm.updatedAt.by"),(0,a.jsxs)("div",{style:{flexDirection:"row",display:"flex"},children:[(0,a.jsx)("input",{className:(0,C.A)(Ye),type:"datetime-local",value:(null===(d=null==p?void 0:p.updatedAt)||void 0===d?void 0:d.lte)||"",onChange:e=>x("updatedAt",Object.assign(Object.assign({},null==p?void 0:p.updatedAt),{lte:e.target.value}))}),(0,a.jsx)("button",{className:(0,C.A)($e),type:"button",onClick:()=>x("updatedAt",Object.assign(Object.assign({},null==p?void 0:p.updatedAt),{lte:void 0})),children:"X"})]})]}),j["updatedAt.lte"]&&(0,a.jsx)("p",{className:(0,C.A)(ze),children:h(j["updatedAt.lte"])})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:(0,C.A)(Ve),children:h("CommonFiltersForm.sorting.label")}),(0,a.jsxs)("label",{className:(0,C.A)(We),children:[h("CommonFiltersForm.sorting.byField"),(0,a.jsxs)("select",{className:(0,C.A)(Qe),value:(null===(c=null==p?void 0:p.sorting)||void 0===c?void 0:c.field)||"",onChange:e=>{var t;return x("sorting",e.target.value?{field:e.target.value,type:(null===(t=null==p?void 0:p.sorting)||void 0===t?void 0:t.type)||"ASC"}:void 0)},children:[(0,a.jsx)("option",{value:"",children:h("CommonFiltersForm.sorting.field.noSorting")}),(0,a.jsx)("option",{value:"id",children:h("CommonFiltersForm.sorting.field.id")}),(0,a.jsx)("option",{value:"createdAt",children:h("CommonFiltersForm.sorting.field.createdAt")}),(0,a.jsx)("option",{value:"updatedAt",children:h("CommonFiltersForm.sorting.field.updatedAt")}),(0,a.jsx)("option",{value:"name",children:h("CommonFiltersForm.sorting.field.name")})]})]}),j["sorting.field"]&&(0,a.jsx)("p",{className:(0,C.A)(ze),children:h(j["sorting.field"])}),(0,a.jsxs)("label",{className:(0,C.A)(We),children:[h("CommonFiltersForm.sorting.direction"),(0,a.jsxs)("select",{className:(0,C.A)(Qe),value:(null===(u=null==p?void 0:p.sorting)||void 0===u?void 0:u.type)||"ASC",onChange:e=>{var t;return x("sorting",{field:(null===(t=null==p?void 0:p.sorting)||void 0===t?void 0:t.field)||"id",type:e.target.value})},children:[(0,a.jsx)("option",{value:"ASC",children:h("CommonFiltersForm.sorting.type.ASC")}),(0,a.jsx)("option",{value:"DESC",children:h("CommonFiltersForm.sorting.type.DESC")})]})]}),j["sorting.type"]&&(0,a.jsx)("p",{className:(0,C.A)(ze),children:h(j["sorting.type"])})]}),(b=o,"function"==typeof b?o(j,p,x):o),(0,a.jsx)("button",{className:(0,C.A)(Je),type:"button",onClick:()=>{v({}),g({})},children:h("CommonFiltersForm.resetButton")}),(0,a.jsx)("button",{className:(0,C.A)(Je),type:"submit",children:h("CommonFiltersForm.submitButton")})]});var b},Ze=({initialFilters:e,onChange:t})=>{const{t:r}=(0,P.Bd)();return(0,a.jsx)(Xe,{initialFilters:e,childrenSchema:Me,onChange:t,children:(e,t,s)=>(0,a.jsxs)("div",{children:[(0,a.jsxs)("label",{className:(0,C.A)("OrdersFiltersForm-module_label-cdxmc"),children:[r("OrdersFiltersForm.status.label"),(0,a.jsxs)("select",{className:(0,C.A)("OrdersFiltersForm-module_select-HBxmw"),value:(null==t?void 0:t.status)||"",onChange:e=>s("status",e.target.value?e.target.value:void 0),children:[(0,a.jsx)("option",{value:"",children:r("OrdersFiltersForm.status.noStatus")}),(0,a.jsx)("option",{value:M.Delivered,children:r("OrderStatus.delivered")}),(0,a.jsx)("option",{value:M.InTransit,children:r("OrderStatus.in_transit")}),(0,a.jsx)("option",{value:M.OrderCancelled,children:r("OrderStatus.order_cancelled")}),(0,a.jsx)("option",{value:M.Packaging,children:r("OrderStatus.packaging")}),(0,a.jsx)("option",{value:M.PendingConfirmation,children:r("OrderStatus.pending_confirmation")}),(0,a.jsx)("option",{value:M.Processing,children:r("OrderStatus.processing")}),(0,a.jsx)("option",{value:M.ReturnRequested,children:r("OrderStatus.return_requested")}),(0,a.jsx)("option",{value:M.WaitingForDelivery,children:r("OrderStatus.waiting_for_delivery")})]})]}),e.status&&(0,a.jsx)("p",{className:(0,C.A)("OrdersFiltersForm-module_error-Oh9UG"),children:r(e.status)})]})})},Ke=e=>{const t={};for(const r in e){const a=e[r];t[r]="object"==typeof a&&null!==a?JSON.stringify(a):"string"==typeof a&&null!==a?`"${a}"`:a.toString()}return t},et=Y.injectEndpoints({endpoints:e=>({getOrders:e.query({query:e=>"/orders"+(e?`?${new URLSearchParams(Ke(JSON.parse(JSON.stringify(e)))).toString()}`:"")}),updateOrder:e.mutation({query:e=>({url:`/orders/${e.id}`,method:"PUT",body:e.body})}),patchOrder:e.mutation({query:e=>({url:`/orders/${e.id}`,method:"PATCH",body:e.body})}),createOrder:e.mutation({query:e=>({url:"/orders/",method:"POST",body:e})})})}),{useGetOrdersQuery:tt,useUpdateOrderMutation:rt,usePatchOrderMutation:at,useCreateOrderMutation:st}=et,ot=(0,s.memo)((({photo:e,name:t,price:r,quantity:s})=>{const{t:o}=(0,P.Bd)();return(0,a.jsxs)("div",{className:"OrderProductItem-module_orderProductItem-sYHX2",children:[(0,a.jsx)("img",{src:e,alt:t,className:"OrderProductItem-module_thumbnail-z9Y9d"}),(0,a.jsxs)("div",{className:"OrderProductItem-module_details-n2sj1",children:[(0,a.jsx)("span",{className:"OrderProductItem-module_name-bh6z9",children:t}),(0,a.jsx)("span",{className:"OrderProductItem-module_price-rZ48K",children:o("OrderProductItem.price",{price:r})}),(0,a.jsx)("span",{className:"OrderProductItem-module_quantity-OyVph",children:o("OrderProductItem.quantity",{quantity:s})})]})]})})),nt=e=>{if(e&&!Array.isArray(e)){if("object"==typeof(t=e)&&null!==t&&"status"in t&&"data"in t)throw Error(V(e.data).join(",\n"));if((e=>"object"==typeof e&&null!==e&&"status"in e&&"error"in e)(e))throw Error(e.error);throw Error("Unknown error")}var t},it=(e,t,r)=>{const[a,o]=(0,s.useState)({pageSize:4,pageNumber:1}),[n,i]=(0,s.useState)({}),[l,d]=(0,s.useState)([]),[c,u]=(0,s.useState)({}),m=(0,s.useRef)(!0),[h,p]=(0,s.useState)(!0),{data:g,isFetching:j,isLoading:v,isError:x,isSuccess:b,error:y}=e(Object.assign(Object.assign(Object.assign({},c),{pagination:a}),n)),f=null==g?void 0:g.data,C=null==g?void 0:g.pagination;(0,s.useEffect)((()=>{!f||j||1===(null==C?void 0:C.pageNumber)&&!m.current||(d((e=>[...e,...f])),m.current=!1)}),[f,C,h,j]);const P=(0,s.useCallback)((e=>{u(e),o((e=>Object.assign(Object.assign({},e),{pageNumber:1}))),d([]),m.current=!0,p((e=>!e))}),[]),S=(0,s.useCallback)((()=>{C&&l.length<C.total&&!j&&o((e=>{var t;return Object.assign(Object.assign({},e),{pageNumber:(null!==(t=e.pageNumber)&&void 0!==t?t:0)+1})}))}),[C,l.length,j]),[A,{isError:_,error:N}]=t(),[E,{isError:O,error:w}]=r(),R=(0,s.useCallback)(((e,t)=>{e?e&&A({id:e,body:t}).then((e=>{e.data&&d((t=>t.map((t=>{var r;return t.id===(null===(r=e.data)||void 0===r?void 0:r.id)?e.data:t}))))})).catch((e=>{console.error("Update item: ",e)})):E(t).then((()=>{})).catch((e=>{console.error("Create item: ",e)}))}),[l]),[I,F]=(0,s.useState)(null),q=(0,s.useCallback)((e=>{F(e)}),[]),U=(0,s.useCallback)((e=>{F(e)}),[]),D=(0,s.useCallback)((()=>{F(null)}),[]),L=(0,s.useCallback)((e=>{i(e),o((e=>Object.assign(Object.assign({},e),{pageNumber:1}))),d([]),m.current=!0,p((e=>!e))}),[]);return nt(y),nt(w),nt(N),{items:l,permanentFilters:n,handlerPermanentFiltersChange:L,currentFilters:c,handlerFiltersChange:P,handlerFetchItems:S,isFetching:j,isLoading:v,isError:x||_||O,isSuccess:b,error:[...x?y:[],..._?N:[],...O?w:[]],editingItem:I,handlerAddClick:q,handlerEditClick:U,clearEditItem:D,handlerEditItem:R}},lt=({header:e,footer:t,children:r,sidebar:o})=>{const[n,i]=(0,s.useState)(!0);return(0,a.jsxs)("div",{className:"PageLayout-module_layout-UU8ni",children:[(0,a.jsx)("header",{className:"PageLayout-module_header-oUNfJ",children:e}),(0,a.jsxs)("div",{className:"PageLayout-module_main-Qu5pa",children:[(0,a.jsx)("div",{className:(0,C.A)("PageLayout-module_sidebar-yqO4x",!n&&"PageLayout-module_hidden-B79U_"),children:(0,a.jsx)("div",{className:(0,C.A)("PageLayout-module_sidebarContent-qzowI"),children:o})}),(0,a.jsx)(re,{lable:n?"<":">",className:"PageLayout-module_toggleButton-AAay5",disabled:!1,onClick:()=>{i((e=>!e))},type:"button"}),(0,a.jsx)("main",{className:"PageLayout-module_content-N02Ed",children:r})]}),(0,a.jsx)("footer",{className:"PageLayout-module_footer-VPt9F",children:t})]})},dt={currentCartEntries:[],createOrderStatus:"idle",createOrdreError:null},ct=(0,O.Z0)({name:"cart",initialState:dt,reducers:{addToCart:(e,t)=>{e.currentCartEntries.push(t.payload)},removeFromCart:(e,t)=>{e.currentCartEntries=e.currentCartEntries.filter((e=>e.product.id!==t.payload))},setQuantity:(e,t)=>{const r=e.currentCartEntries.find((e=>e.product.id===t.payload.product.id));e.currentCartEntries=r?e.currentCartEntries.map((e=>e.product.id===t.payload.product.id?Object.assign(Object.assign({},e),{quantity:t.payload.quantity}):e)).filter((e=>e.quantity>0)):[...e.currentCartEntries,{product:t.payload.product,quantity:1}]},clearCart:()=>dt},extraReducers:e=>{e.addCase(w,(()=>dt)).addMatcher(Q.endpoints.signin.matchPending,(e=>{e.createOrderStatus="loading",e.createOrdreError=null})).addMatcher(Q.endpoints.signin.matchFulfilled,(e=>{e.createOrderStatus="succeeded"})).addMatcher(Q.endpoints.signin.matchRejected,((e,t)=>{e.createOrderStatus="failed",e.createOrdreError=t.payload}))}}),{addToCart:ut,removeFromCart:mt,setQuantity:ht,clearCart:pt}=ct.actions,gt=ct.reducer,jt="Counter-module_counter-MBAD9",vt="Counter-module_counterEnable-xeyoJ",xt=({count:e,min:t,max:r,disabled:s,onIncrement:o=()=>{},onDecrement:n=()=>{},onInputChange:i=e=>{}})=>(0,a.jsxs)("div",{className:(0,C.A)("Counter-module_wrapper-xXMXj"),children:[(0,a.jsx)("button",{onClick:()=>n(),className:(0,C.A)(jt,{[vt]:!s&&(void 0===t||e>t)}),disabled:s||void 0!==t&&e<=t,children:"-"}),(0,a.jsx)("input",{className:(0,C.A)("Counter-module_input-i4M3F"),type:"number",value:e,disabled:s,onChange:a=>(void 0===r||Number(a.target.value)<=r)&&(void 0===t||Number(a.target.value)>=t)?i(Number(a.target.value)):a.target.value=e.toString()}),(0,a.jsx)("button",{onClick:()=>o(),className:(0,C.A)(jt,{[vt]:!s&&(void 0===r||e<r)}),disabled:s||void 0!==r&&e>=r,children:"+"})]}),bt=({name:e,count:t,photo:r,price:s,onIncrement:o,onDecrement:n,onInputChange:i})=>{const{t:l}=(0,P.Bd)();return(0,a.jsx)(a.Fragment,{children:(0,a.jsxs)("div",{className:"CartItem-module_wrapper-u50iL",children:[(0,a.jsx)("div",{className:"CartItem-module_imageWrapper-whafz",children:(0,a.jsx)("img",{className:"CartItem-module_image-qJpGG",src:r,alt:l("product.photo",{name:e})})}),(0,a.jsx)("div",{className:"CartItem-module_infoWrapper-UBPP9",children:(0,a.jsx)("div",{className:"CartItem-module_title-zOmtH",children:e})}),(0,a.jsxs)("div",{className:"CartItem-module_cartWrapper-hG1PV",children:[(0,a.jsx)("div",{className:"CartItem-module_counter-emAji",children:(0,a.jsx)(xt,{count:t,min:1,onIncrement:o,onDecrement:n,onInputChange:i})}),(0,a.jsx)("div",{className:"CartItem-module_price-yl6DL",children:l("product.price",{price:t*s})}),(0,a.jsx)("div",{className:"CartItem-module_removeWrapper-p4R_m",children:(0,a.jsx)(re,{className:"CartItem-module_remove-r7zf1",lable:l("CartItem.button"),onClick:()=>{i(0)},disabled:0===t})})]})]})})},yt=e=>Be.Ik({categoryIds:Be.YO(Be.Yj().required().oneOf(e)).optional(),name:Be.Yj().optional(),ids:Be.YO().optional()}),ft=({initialFilters:e,onChange:t,categories:r})=>{const s=e=>{const[t]=e;return t},{t:o}=(0,P.Bd)(),n=yt(null==r?void 0:r.map((e=>e.id)));return(0,a.jsx)(Xe,{initialFilters:e,childrenSchema:n,onChange:t,children:(e,t,n)=>(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:(0,C.A)("CatalogFiltersForm-module_label-Tqj98"),children:o("CatalogFiltersForm.category.label")}),(0,a.jsxs)("select",{className:(0,C.A)("CatalogFiltersForm-module_select-kjRLs"),value:(null==t?void 0:t.categoryIds)&&(null==t?void 0:t.categoryIds.length)>0?s(t.categoryIds):"",onChange:e=>n("categoryIds",e.target.value?[e.target.value]:void 0),children:[(0,a.jsx)("option",{value:"",children:o("CatalogFiltersForm.category.noCategory")}),r.map((e=>(0,a.jsx)("option",{value:e.id,children:e.name},e.id)))]}),e.categoryId&&(0,a.jsx)("p",{className:(0,C.A)("CatalogFiltersForm-module_error-gDoyD"),children:o(e.categoryId)})]})})},Ct={list:"CatalogScreen-module_list-A2if9",item:"CatalogScreen-module_item-_wVRL"},Pt=Y.injectEndpoints({endpoints:e=>({getCategories:e.query({query:e=>"/categories"+(e?`?${new URLSearchParams(Ke(JSON.parse(JSON.stringify(e)))).toString()}`:"")}),updateCategory:e.mutation({query:e=>({url:`/categories/${e.id}`,method:"PUT",body:e.body})}),createCategory:e.mutation({query:e=>({url:"/categories/",method:"POST",body:e})})})}),{useGetCategoriesQuery:St,useUpdateCategoryMutation:At,useCreateCategoryMutation:_t}=Pt,Nt=Y.injectEndpoints({endpoints:e=>({getProducts:e.query({query:e=>"/products"+(e?`?${new URLSearchParams(Ke(JSON.parse(JSON.stringify(e)))).toString()}`:"")}),updateProduct:e.mutation({query:e=>({url:`/products/${e.id}`,method:"PUT",body:e.body})}),createProduct:e.mutation({query:e=>({url:"/products/",method:"POST",body:e})})})}),{useGetProductsQuery:Et,useUpdateProductMutation:Ot,useCreateProductMutation:wt}=Nt,Rt="CartButton-module_button-DypJ8",It=({count:e,max:t,disabled:r,onCountChange:s=()=>{}})=>{const{t:o}=(0,P.Bd)();return(0,a.jsx)("div",{className:(0,C.A)("CartButton-module_wrapper-Ec2jY"),children:0===e?(0,a.jsx)("button",{className:(0,C.A)({[te.button_disable]:r,[te.button_enable]:!r,[Rt]:!r,[te.button]:!0}),disabled:r,onClick:()=>s(1),children:o("CartButton.button")}):(0,a.jsx)(xt,{count:e,min:0,max:t,disabled:r,onDecrement:()=>s(e-1),onIncrement:()=>s(e+1),onInputChange:e=>s(e)})})},Ft=(0,s.memo)((({price:e,photo:t,name:r,desc:s,count:o=0,withButton:n=!0,onCountChange:i})=>{const{t:l}=(0,P.Bd)();return(0,a.jsxs)("div",{className:(0,C.A)("ProductItem-module_wrapper-lynfG"),children:[(0,a.jsx)("div",{children:(0,a.jsx)("img",{className:(0,C.A)("ProductItem-module_image-ZpwnO"),src:t,alt:l("product.photo_alt",{name:r})})}),(0,a.jsx)("div",{className:(0,C.A)("ProductItem-module_title-JqfTx"),children:(0,a.jsx)("h3",{children:r})}),(0,a.jsx)("div",{className:(0,C.A)("ProductItem-module_price-_nsav"),children:(0,a.jsx)("span",{children:l("product.price",{price:e})})}),(0,a.jsx)("div",{className:(0,C.A)("ProductItem-module_description-KITth"),children:(0,a.jsx)("p",{children:(d=s,c=100,(d&&d.length>c?d.substring(0,c-3)+"...":d)||l("product.description_undefined"))})}),(0,a.jsx)("div",{className:(0,C.A)("ProductItem-module_button-kXRBt"),style:n?{visibility:"visible"}:{visibility:"hidden"},children:(0,a.jsx)(It,{count:o,onCountChange:i})})]});var d,c})),qt=Be.Ik({name:Be.Yj().optional(),ids:Be.YO().optional()}),Ut=({initialFilters:e,onChange:t})=>(0,a.jsx)(Xe,{initialFilters:e,childrenSchema:qt,onChange:t}),Dt=(0,s.memo)((({photo:e,name:t})=>{const{t:r}=(0,P.Bd)();return(0,a.jsxs)("div",{className:(0,C.A)("CategoryItem-module_wrapper-f50Uh"),children:[(0,a.jsx)("div",{children:(0,a.jsx)("img",{className:(0,C.A)("CategoryItem-module_image-TrFNY"),src:e,alt:r("category.photo_alt",{name:t})})}),(0,a.jsx)("div",{className:(0,C.A)("CategoryItem-module_title-zysAY"),children:(0,a.jsx)("h3",{children:t})})]})})),Lt="CategoryEditForm-module_label-rZb92",kt="CategoryEditForm-module_error-cVo_Z",Tt="CategoryEditForm-module_input-ARD0v";const Bt=({onSubmit:e,defaultValues:t})=>{var r,s,o,n;const{t:i}=(0,P.Bd)(),{register:l,handleSubmit:d,setValue:c,clearErrors:u,setError:m,formState:{errors:h}}=(0,X.mN)({defaultValues:t});return(0,a.jsxs)("form",{onSubmit:d(e),className:(0,C.A)("CategoryEditForm-module_form-j1HdD"),children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:(0,C.A)(Lt),children:i("CategoryEdit.name")}),(0,a.jsx)("input",Object.assign({className:(0,C.A)(Tt,{[kt]:h.name}),type:"text"},l("name",{required:i("CategoryEdit.errors.nameRequired")}),{placeholder:i("CategoryEdit.namePlaceholder")})),"string"==typeof(null===(r=null==h?void 0:h.name)||void 0===r?void 0:r.message)&&(0,a.jsx)("p",{className:kt,children:h.name.message})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:(0,C.A)(Lt),children:i("CategoryEdit.photo")}),(0,a.jsxs)("div",{style:{display:"flex",width:"100%",alignItems:"center",gap:"10px"},children:[(0,a.jsx)("input",Object.assign({className:(0,C.A)(Tt,{[kt]:h.photo}),type:"text"},l("photo.url",{validate:e=>null==e||""===e||e.trim().startsWith("http")||i("CategoryEdit.errors.photosInvalid")}),{placeholder:i("CategoryEdit.photoPlaceholder")})),(0,a.jsx)("input",{type:"file",id:"file-upload",onChange:e=>{return t=void 0,r=void 0,s=function*(){var t;const r=_();if(!r)throw new Error("No token");const[a]=null!==(t=e.target.files)&&void 0!==t?t:[];if(!a)return;const s=new FormData;s.append("file",a);try{const e=yield fetch(`${S}/api/upload`,{headers:{Authorization:`Bearer ${r}`},method:"POST",body:s});if(!e.ok)throw new Error("Ошибка загрузки файла");const{url:t}=yield e.json();c("photo.url",t),u("photo.url")}catch(e){m("photo.url",{type:"manual",message:i("CategoryEdit.errors.uploadError")})}},new((a=void 0)||(a=Promise))((function(e,o){function n(e){try{l(s.next(e))}catch(e){o(e)}}function i(e){try{l(s.throw(e))}catch(e){o(e)}}function l(t){var r;t.done?e(t.value):(r=t.value,r instanceof a?r:new a((function(e){e(r)}))).then(n,i)}l((s=s.apply(t,r||[])).next())}));var t,r,a,s},style:{display:"none"}}),(0,a.jsx)("label",{htmlFor:"file-upload",className:"CategoryEditForm-module_customFileButton-ytWwr",style:{whiteSpace:"nowrap"},children:"Выберите файл"})]}),h.photo&&(null===(s=h.photo)||void 0===s?void 0:s.url)&&(0,a.jsx)("p",{className:kt,children:null===(n=null===(o=h.photo)||void 0===o?void 0:o.url)||void 0===n?void 0:n.message})]}),(0,a.jsx)(re,{className:"CategoryEditForm-module_button-dl9zg",lable:i("CategoryEdit.button"),type:"submit",disabled:!1})]})};const Mt=function(e){const t=t=>{const{onEdit:r}=t,s=function(e,t){var r={};for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&t.indexOf(a)<0&&(r[a]=e[a]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var s=0;for(a=Object.getOwnPropertySymbols(e);s<a.length;s++)t.indexOf(a[s])<0&&Object.prototype.propertyIsEnumerable.call(e,a[s])&&(r[a[s]]=e[a[s]])}return r}(t,["onEdit"]);return(0,a.jsxs)("div",{className:"withEditMode-module_editWrapper-E4NSR",children:[(0,a.jsx)(e,Object.assign({},s)),(0,a.jsx)("button",{className:"withEditMode-module_editButton-MpC7u",onClick:r,children:"Edit"})]})};return t.displayName=`withEditMode(${e.displayName||e.name||"Component"})`,t};var Vt=r(961);const Wt=({visible:e,setVisible:t,children:r})=>e?(0,Vt.createPortal)((0,a.jsx)("div",{className:"Modal-module_modalOverlay-cEDCd",children:(0,a.jsxs)("div",{className:"Modal-module_modalBox-iA6nu",children:[(0,a.jsx)("div",{className:"Modal-module_close-MDpcm",onClick:()=>t(!1)}),(0,a.jsx)("div",{className:"Modal-module_text-L169J",children:r})]})}),document.body):null;const zt=Mt(Dt),Yt={item:"ProductsEditScreen-module_item-bOSPI",wrapper:"ProductsEditScreen-module_wrapper-D5FLc",content:"ProductsEditScreen-module_content-V__tD",addButton:"ProductsEditScreen-module_addButton-jB99E",header:"ProductsEditScreen-module_header-PYOLy",footer:"ProductsEditScreen-module_footer-hF_1_",error:"ProductsEditScreen-module_error-Ael_7"},Qt=({initialFilters:e,onChange:t,categories:r})=>{const s=e=>{const[t]=e;return t},{t:o}=(0,P.Bd)(),n=yt(null==r?void 0:r.map((e=>e.id)));return(0,a.jsx)(Xe,{initialFilters:e,childrenSchema:n,onChange:t,children:(e,t,n)=>(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:(0,C.A)("ProductsFiltersForm-module_label-Pmr26"),children:o("ProductsFiltersForm.category.label")}),(0,a.jsxs)("select",{className:(0,C.A)("ProductsFiltersForm-module_select-CvJaE"),value:(null==t?void 0:t.categoryIds)&&(null==t?void 0:t.categoryIds.length)>0?s(t.categoryIds):"",onChange:e=>n("categoryIds",e.target.value?[e.target.value]:void 0),children:[(0,a.jsx)("option",{value:"",children:o("ProductsFiltersForm.category.noCategory")}),r.map((e=>(0,a.jsx)("option",{value:e.id,children:e.name},e.id)))]}),e.categoryId&&(0,a.jsx)("p",{className:(0,C.A)("ProductsFiltersForm-module_error-Ix4Kh"),children:o(e.categoryId)})]})})},Jt="ProductEditForm-module_label-w0OE9",$t="ProductEditForm-module_error-CTVFG",Gt="ProductEditForm-module_input-dWjEw";const Ht=({onSubmit:e,defaultValues:t,categories:r})=>{var s,o,n,i;const{t:l}=(0,P.Bd)(),{register:d,handleSubmit:c,control:u,setValue:m,clearErrors:h,setError:p,formState:{errors:g}}=(0,X.mN)({defaultValues:t});return(0,a.jsxs)("form",{onSubmit:c(e),className:(0,C.A)("ProductEditForm-module_form-r1ogx"),children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:(0,C.A)(Jt),children:l("ProductEdit.name")}),(0,a.jsx)("input",Object.assign({className:(0,C.A)(Gt,{[$t]:g.name}),type:"text"},d("name",{required:l("ProductEdit.errors.nameRequired")}),{placeholder:l("ProductEdit.namePlaceholder")})),"string"==typeof(null===(s=null==g?void 0:g.name)||void 0===s?void 0:s.message)&&(0,a.jsx)("p",{className:$t,children:g.name.message})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:(0,C.A)(Jt),children:l("ProductEdit.photo")}),(0,a.jsxs)("div",{style:{display:"flex",width:"100%",alignItems:"center",gap:"10px"},children:[(0,a.jsx)("input",Object.assign({className:(0,C.A)(Gt,{[$t]:g.photo}),type:"text"},d("photo.url",{validate:e=>null==e||""===e||e.trim().startsWith("http")||l("ProductEdit.errors.photosInvalid")}),{placeholder:l("ProductEdit.photoPlaceholder")})),(0,a.jsx)("input",{type:"file",id:"file-upload",onChange:e=>{return t=void 0,r=void 0,s=function*(){var t;const r=_();if(!r)throw new Error("No token");const[a]=null!==(t=e.target.files)&&void 0!==t?t:[];if(!a)return;const s=new FormData;s.append("file",a);try{const e=yield fetch(`${S}/api/upload`,{headers:{Authorization:`Bearer ${r}`},method:"POST",body:s});if(!e.ok)throw new Error("Ошибка загрузки файла");const{url:t}=yield e.json();m("photo.url",t),h("photo.url")}catch(e){console.error("Ошибка загрузки файла:",e),p("photo.url",{type:"manual",message:"Не удалось загрузить файл. Попробуйте еще раз."})}},new((a=void 0)||(a=Promise))((function(e,o){function n(e){try{l(s.next(e))}catch(e){o(e)}}function i(e){try{l(s.throw(e))}catch(e){o(e)}}function l(t){var r;t.done?e(t.value):(r=t.value,r instanceof a?r:new a((function(e){e(r)}))).then(n,i)}l((s=s.apply(t,r||[])).next())}));var t,r,a,s},style:{display:"none"}}),(0,a.jsx)("label",{htmlFor:"file-upload",className:"ProductEditForm-module_customFileButton-KuSjB",style:{whiteSpace:"nowrap"},children:"Выберите файл"})]}),g.photo&&(null===(o=g.photo)||void 0===o?void 0:o.url)&&(0,a.jsx)("p",{className:$t,children:null===(i=null===(n=g.photo)||void 0===n?void 0:n.url)||void 0===i?void 0:i.message})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:(0,C.A)(Jt),children:l("ProductEdit.description")}),(0,a.jsx)("textarea",Object.assign({className:(0,C.A)("ProductEditForm-module_textarea-vSPmU")},d("description"),{placeholder:l("ProductEdit.descriptionPlaceholder")}))]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:(0,C.A)(Jt),children:l("ProductEdit.price")}),(0,a.jsx)("input",Object.assign({className:(0,C.A)(Gt,{[$t]:g.price}),type:"text",pattern:"^-?\\d*(\\.\\d+)?$"},d("price",{required:l("ProductEdit.errors.priceRequired"),min:{value:0,message:l("ProductEdit.errors.priceMin")}}),{placeholder:l("ProductEdit.pricePlaceholder")})),g.price&&(0,a.jsx)("p",{className:$t,children:g.price.message})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:(0,C.A)(Jt),children:l("ProductEdit.oldPrice")}),(0,a.jsx)("input",Object.assign({className:(0,C.A)(Gt,{[$t]:g.oldPrice}),type:"text",pattern:"^-?\\d*(\\.\\d+)?$"},d("oldPrice",{min:{value:0,message:l("ProductEdit.errors.priceMin")}}),{placeholder:l("ProductEdit.oldPricePlaceholder")}))]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:(0,C.A)(Jt),children:l("ProductEdit.category")}),(0,a.jsx)(X.xI,{control:u,name:"category",rules:{required:l("ProductEdit.errors.categoryRequired")},render:({field:e})=>(0,a.jsxs)("select",Object.assign({},e,{className:(0,C.A)("ProductEditForm-module_select-Wi_yp"),children:[(0,a.jsx)("option",{value:"",children:l("ProductEdit.selectCategory")}),null==r?void 0:r.map((e=>(0,a.jsx)("option",{value:e,children:e},e)))]}))}),g.category&&(0,a.jsx)("p",{className:$t,children:g.category.message})]}),(0,a.jsx)(re,{className:"ProductEditForm-module_button-b3qp8",lable:l("ProductEdit.button"),type:"submit",disabled:!1})]})};const Xt=Mt(Ft),Zt="ChangePassword-module_label-TONk1",Kt="ChangePassword-module_error-YmfJe",er="ChangePassword-module_input-phebh",tr=({onSubmit:e})=>{var t,r,s;const{register:o,handleSubmit:n,formState:{errors:i},watch:l}=(0,X.mN)(),d=l("newPassword"),{t:c}=(0,P.Bd)();return(0,a.jsxs)("form",{onSubmit:n(e),className:(0,C.A)("ChangePassword-module_form-LfLa9"),children:[(0,a.jsx)("h2",{className:(0,C.A)("ChangePassword-module_title-fpJMA"),children:c("ChangePassword.title")}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:(0,C.A)(Zt),children:c("ChangePassword.oldPassword")}),(0,a.jsx)("input",Object.assign({className:(0,C.A)(er,{[Kt]:i.oldPassword}),type:"password"},o("oldPassword",{required:c("ChangePassword.errors.oldPasswordRequired")}),{placeholder:c("ChangePassword.oldPasswordPlaceholder")})),"string"==typeof(null===(t=i.oldPassword)||void 0===t?void 0:t.message)&&(0,a.jsx)("p",{className:Kt,children:i.oldPassword.message})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:(0,C.A)(Zt),children:c("ChangePassword.newPassword")}),(0,a.jsx)("input",Object.assign({className:(0,C.A)(er,{[Kt]:i.newPassword}),type:"password"},o("newPassword",{required:c("ChangePassword.errors.newPasswordRequired")}),{placeholder:c("ChangePassword.newPasswordPlaceholder")})),"string"==typeof(null===(r=i.newPassword)||void 0===r?void 0:r.message)&&(0,a.jsx)("p",{className:Kt,children:i.newPassword.message})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:(0,C.A)(Zt),children:c("ChangePassword.confirmPassword")}),(0,a.jsx)("input",Object.assign({className:(0,C.A)(er,{[Kt]:i.confirmPassword}),type:"password"},o("confirmPassword",{required:c("ChangePassword.errors.confirmPasswordRequired"),validate:e=>e===d||c("ChangePassword.errors.confirmPasswordMatch")}),{placeholder:c("ChangePassword.confirmPasswordPlaceholder")})),"string"==typeof(null===(s=i.confirmPassword)||void 0===s?void 0:s.message)&&(0,a.jsx)("p",{className:Kt,children:i.confirmPassword.message})]}),(0,a.jsx)(re,{className:"ChangePassword-module_button-Oo3Jx",lable:c("ChangePassword.button"),type:"submit",disabled:!1})]})},rr="EditProfile-module_error-l6vJX",ar=({onSubmit:e,defaultValues:t})=>{var r;const{register:s,handleSubmit:o,formState:{errors:n}}=(0,X.mN)({defaultValues:t}),{t:i}=(0,P.Bd)();return(0,a.jsxs)("form",{onSubmit:o(e),className:(0,C.A)("EditProfile-module_form-Ne3Uq"),children:[(0,a.jsx)("h2",{className:(0,C.A)("EditProfile-module_title-vMTug"),children:i("EditProfile.title")}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:(0,C.A)("EditProfile-module_label-pcXi1"),children:i("EditProfile.userName")}),(0,a.jsx)("input",Object.assign({className:(0,C.A)("EditProfile-module_input-jqcQH",{[rr]:n.userName})},s("userName",{required:i("EditProfile.errors.userNameRequired")}),{placeholder:i("EditProfile.userNamePlaceholder")})),"string"==typeof(null===(r=n.userName)||void 0===r?void 0:r.message)&&(0,a.jsx)("p",{className:rr,children:n.userName.message})]}),(0,a.jsx)(re,{className:"EditProfile-module_button-lbhFI",lable:i("EditProfile.button"),disabled:!1,type:"submit"})]})},sr=Y.injectEndpoints({endpoints:e=>({getProfile:e.query({query:()=>"/profile",providesTags:["Profile"]}),updateProfile:e.mutation({query:e=>({url:"/profile",method:"PUT",body:e})}),changePassword:e.mutation({query:e=>({url:"/profile/change-password",method:"POST",body:e})})})}),{useGetProfileQuery:or,useUpdateProfileMutation:nr,useChangePasswordMutation:ir}=sr;var lr=function(e,t,r,a){return new(r||(r=Promise))((function(s,o){function n(e){try{l(a.next(e))}catch(e){o(e)}}function i(e){try{l(a.throw(e))}catch(e){o(e)}}function l(e){var t;e.done?s(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(n,i)}l((a=a.apply(e,t||[])).next())}))};const dr="RootScreen-module_tab-kmy0x",cr="RootScreen-module_tabItem-PZy9A",ur=({initialFilters:e,onChange:t})=>{const{t:r}=(0,P.Bd)();return(0,a.jsx)(Xe,{initialFilters:e,childrenSchema:Me,onChange:t,children:(e,t,s)=>(0,a.jsxs)("div",{children:[(0,a.jsxs)("label",{className:(0,C.A)("UserOrdersFiltersForm-module_label-kZzpq"),children:[r("UserOrdersFiltersForm.status.label"),(0,a.jsxs)("select",{className:(0,C.A)("UserOrdersFiltersForm-module_select-VQW3Q"),value:(null==t?void 0:t.status)||"",onChange:e=>s("status",e.target.value?e.target.value:void 0),children:[(0,a.jsx)("option",{value:"",children:r("UserOrdersFiltersForm.status.noStatus")}),(0,a.jsx)("option",{value:M.Delivered,children:r("OrderStatus.delivered")}),(0,a.jsx)("option",{value:M.InTransit,children:r("OrderStatus.in_transit")}),(0,a.jsx)("option",{value:M.OrderCancelled,children:r("OrderStatus.order_cancelled")}),(0,a.jsx)("option",{value:M.Packaging,children:r("OrderStatus.packaging")}),(0,a.jsx)("option",{value:M.PendingConfirmation,children:r("OrderStatus.pending_confirmation")}),(0,a.jsx)("option",{value:M.Processing,children:r("OrderStatus.processing")}),(0,a.jsx)("option",{value:M.ReturnRequested,children:r("OrderStatus.return_requested")}),(0,a.jsx)("option",{value:M.WaitingForDelivery,children:r("OrderStatus.waiting_for_delivery")})]})]}),e.status&&(0,a.jsx)("p",{className:(0,C.A)("UserOrdersFiltersForm-module_error-v2SDC"),children:r(e.status)})]})})},mr="UserOrdersScreen-module_selectedOrder-MrYiw",hr="OrderItem-module_row-KwDyd",pr="OrderItem-module_label-VQQRN",gr="OrderItem-module_value-ItCOE",jr=(0,s.memo)((({createdAt:e,updatedAt:t,status:r,totalPrice:s})=>{const{t:o}=(0,P.Bd)(),n=o(`OrderStatus.${r}`);return(0,a.jsxs)("div",{className:"OrderItem-module_orderItem-WRyOm",children:[(0,a.jsxs)("div",{className:hr,children:[(0,a.jsx)("span",{className:pr,children:o("OrderItem.createdAt",{createdAt:e})}),(0,a.jsx)("span",{className:gr,children:o("OrderItem.totalPrice",{totalPrice:s})})]}),(0,a.jsxs)("div",{className:hr,children:[(0,a.jsx)("span",{className:pr,children:o("OrderItem.status",{status:n})}),(0,a.jsx)("span",{className:gr,children:o("OrderItem.updatedAt",{updatedAt:t})})]})]})})),vr=[{label:"Routes.Home.label",path:"/",element:(0,a.jsx)((()=>(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("p",{children:"Учебный проект заготовки под магазин."}),(0,a.jsx)("p",{children:"В проекте используются:"}),(0,a.jsxs)("ul",{className:(0,C.A)("RootScreen-module_centeredList-Xrvhe"),children:[(0,a.jsx)("li",{children:(0,a.jsx)("span",{children:"React"})}),(0,a.jsx)("li",{children:(0,a.jsx)("span",{children:"React Router Dom"})}),(0,a.jsx)("li",{children:(0,a.jsx)("span",{children:"Redux"})}),(0,a.jsx)("li",{children:(0,a.jsx)("span",{children:"RTK Query"})}),(0,a.jsx)("li",{children:(0,a.jsx)("span",{children:"React Hook Form"})}),(0,a.jsx)("li",{children:(0,a.jsx)("span",{children:"Чистые формы для фильров"})}),(0,a.jsx)("li",{children:(0,a.jsx)("span",{children:"Yup"})}),(0,a.jsx)("li",{children:(0,a.jsx)("span",{children:"i18next"})})]}),(0,a.jsx)("p",{children:"Есть два (минимум) зарегистрированных ползователя."}),(0,a.jsxs)("div",{className:(0,C.A)(dr),children:[(0,a.jsx)("span",{className:(0,C.A)(cr),children:"user68@example.com"}),(0,a.jsx)("span",{className:(0,C.A)(cr),children:"qqqqqqqq"})]}),(0,a.jsxs)("div",{className:(0,C.A)(dr),children:[(0,a.jsx)("span",{className:(0,C.A)(cr),children:"qwerty@qwerty.com"}),(0,a.jsx)("span",{className:(0,C.A)(cr),children:"qqqqqqqq"})]})]})),{})}],xr=[{label:"Routes.Catalog.label",path:"/catalog",element:(0,a.jsx)((()=>{const{t:e}=(0,P.Bd)(),t=(0,y.wA)(),[r,o]=(0,s.useState)([]),n=(0,s.useRef)(!0),{data:i,isFetching:l,isSuccess:d}=St({},{skip:!n.current}),c=null==i?void 0:i.data,u=null==i?void 0:i.pagination;(0,s.useEffect)((()=>{!c||l||1===(null==u?void 0:u.pageNumber)&&!n.current||(o((e=>[...e,...c])),n.current=!1)}),[c,u,l]);const{items:m,currentFilters:h,handlerFiltersChange:p,handlerFetchItems:g,error:j}=it(Et,Ot,wt),v=(0,y.d4)((e=>e.cart.currentCartEntries)),x=(0,s.useCallback)(((e,r)=>{t(ht({product:e,quantity:r}))}),[t]),b=(0,s.useCallback)((e=>{var t,r;return(0,a.jsx)("div",{className:(0,C.A)(Ct.item),children:(0,a.jsx)(Ft,{name:e.name,desc:e.desc,price:e.price,photo:e.photo,count:null!==(r=null===(t=v.find((({product:t})=>t.id===e.id)))||void 0===t?void 0:t.quantity)&&void 0!==r?r:0,onCountChange:t=>x(e,t)})},e.id)}),[v,x]);return(0,a.jsx)(lt,{footer:(0,a.jsx)(a.Fragment,{children:j&&(0,a.jsx)("div",{className:Ct.footer,children:(0,a.jsx)("div",{className:Ct.error,children:j.map((t=>e(t))).join("\n")})})}),header:(0,a.jsx)(a.Fragment,{}),sidebar:d?(0,a.jsx)(a.Fragment,{children:(0,a.jsx)(ft,{initialFilters:h,onChange:p,categories:r})}):(0,a.jsx)(H,{}),children:(0,a.jsx)("div",{className:(0,C.A)(Ct.list),children:(0,a.jsx)(ke,{items:m,doFetch:g,render:b,oneObserve:!0})})})}),{})},{label:"Routes.Cart.label",path:"/cart",element:(0,a.jsx)((()=>{const{t:e}=(0,P.Bd)(),t=(0,y.d4)((e=>e.cart.currentCartEntries)),[r,{isLoading:o,isSuccess:n,error:i}]=st(),l=(0,y.wA)(),d=(0,s.useCallback)(((e,t)=>{l(ht({product:e,quantity:t+1}))}),[l]),c=(0,s.useCallback)(((e,t)=>{l(ht({product:e,quantity:t-1}))}),[l]),u=(0,s.useCallback)(((e,t)=>{l(ht({product:e,quantity:t}))}),[l]),m=(0,s.useCallback)((e=>(0,a.jsx)("div",{children:(0,a.jsx)(bt,{name:e.product.name,price:e.product.price,photo:e.product.photo,count:e.quantity,onIncrement:()=>d(e.product,e.quantity),onDecrement:()=>c(e.product,e.quantity),onInputChange:t=>u(e.product,t)})},e.product.id)),[]),h=(0,s.useCallback)((()=>{const e={products:t.map((e=>({id:e.product.id,quantity:e.quantity}))),status:M.PendingConfirmation};r(e)}),[t,l]),p=t.reduce(((e,t)=>e+t.product.price*t.quantity),0);return(0,s.useEffect)((()=>{n&&l(pt())}),[n,l]),0===t.length?(0,a.jsx)("div",{children:e("CartScreen.emptyCart")}):o?(0,a.jsx)(H,{}):(0,a.jsxs)("div",{className:"CartScreen-module_layout-JnUXo",children:[(0,a.jsx)("div",{className:"CartScreen-module_header-VtXP0"}),(0,a.jsx)("div",{className:"CartScreen-module_content-xFexd",children:(0,a.jsx)(ke,{items:t,doFetch:()=>{},render:m,oneObserve:!0})}),(0,a.jsxs)("div",{className:(0,C.A)("CartScreen-module_footer-xUbcQ"),children:[(0,a.jsx)("div",{className:"CartScreen-module_error-vL_rK",children:i&&i.map((t=>e(t))).join("\n")}),(0,a.jsxs)("div",{className:(0,C.A)("CartScreen-module_orderWrapper-ZixMC"),children:[(0,a.jsx)("div",{className:(0,C.A)("CartScreen-module_totalTitle-Ie0b6"),children:(0,a.jsx)("span",{children:e("CartScreen.totalTitle")})}),(0,a.jsx)("div",{className:(0,C.A)("CartScreen-module_total-qrkIg"),children:(0,a.jsx)("span",{children:e("CartScreen.total",{total:p})})}),(0,a.jsx)(re,{className:"CartScreen-module_button-n7PNJ",lable:e("CartScreen.checkoutButton"),onClick:h,disabled:!1})]})]})]})}),{})},{label:"Routes.UserOrders.label",authenticationState:Ae.Authenticated,path:"/userOrders",element:(0,a.jsx)((()=>{const{data:e,isUninitialized:t,isLoading:r}=or(),o=null==e?void 0:e.id,[n,i]=(0,s.useState)(null),{items:l,handlerPermanentFiltersChange:d,currentFilters:c,handlerFiltersChange:u,handlerFetchItems:m,isLoading:h}=it(tt,rt,st);(0,s.useEffect)((()=>{d({userId:o})}),[o]);const p=(0,s.useCallback)((e=>(0,a.jsx)("div",{className:(0,C.A)({[mr]:n===e}),onClick:()=>g(e),children:(0,a.jsx)(jr,{createdAt:e.createdAt,updatedAt:e.updatedAt,status:e.status,totalPrice:e.products.reduce(((e,t)=>e+t.product.price*t.quantity),0)})},e.id)),[n]),g=e=>{i((t=>t===e?null:e))};return t||h||r?(0,a.jsx)(H,{}):(0,a.jsx)(a.Fragment,{children:(0,a.jsx)(lt,{header:(0,a.jsx)(a.Fragment,{}),footer:(0,a.jsx)(a.Fragment,{}),sidebar:(0,a.jsx)(ur,{initialFilters:c,onChange:u}),children:(0,a.jsxs)("div",{className:"UserOrdersScreen-module_content-ScsO2",children:[(0,a.jsx)("div",{className:"UserOrdersScreen-module_orders-xMv9R",children:(0,a.jsx)(ke,{doFetch:m,items:l,render:p,oneObserve:!0})}),(0,a.jsx)("div",{className:"UserOrdersScreen-module_products-ABPGG",children:n&&n.products.map((e=>(0,a.jsx)("div",{children:(0,a.jsx)(ot,{photo:e.product.photo,name:e.product.name,price:e.product.price,quantity:e.quantity})},e._id)))})]})})})}),{})}],br=[{label:"Routes.Edit.label",authenticationState:Ae.AdminAuthenticated,dropdown:[{label:"Routes.Edit.Orders.label",authenticationState:Ae.AdminAuthenticated,path:"/orders",element:(0,a.jsx)((()=>{const{t:e}=(0,P.Bd)(),[t,r]=(0,s.useState)(null),{items:o,currentFilters:n,handlerFiltersChange:i,handlerFetchItems:l,handlerEditItem:d,error:c}=it(tt,rt,st),u=(0,s.useCallback)(((e,t)=>{const r=o.find((e=>e.id===t.id));if(r){const a={status:e,products:r.products.map((e=>({id:e.product.id,quantity:e.quantity})))};d(t.id,a)}}),[o]),m=(0,s.useCallback)((e=>{var r;return(0,a.jsx)("div",{className:(0,C.A)({[Te]:t===e}),onClick:()=>h(e),children:(0,a.jsx)(Le,{createdAt:e.createdAt,updatedAt:e.updatedAt,status:e.status,totalPrice:e.products.reduce(((e,t)=>e+t.product.price*t.quantity),0),id:e.id,email:null!==(r=e.user.name)&&void 0!==r?r:"",onStatusChange:t=>u(t,e)})},e.id)}),[t]),h=e=>{r((t=>t===e?null:e))};return(0,a.jsx)(a.Fragment,{children:(0,a.jsx)(lt,{header:(0,a.jsx)(a.Fragment,{}),footer:(0,a.jsx)(a.Fragment,{children:c&&(0,a.jsx)("div",{className:"OrdersEditScreen-module_footer-aFzl3",children:(0,a.jsx)("div",{className:"OrdersEditScreen-module_error-VfuJF",children:c.map((t=>e(t))).join("\n")})})}),sidebar:(0,a.jsx)(Ze,{initialFilters:n,onChange:i}),children:(0,a.jsxs)("div",{className:"OrdersEditScreen-module_content-Yuvtz",children:[(0,a.jsx)("div",{className:"OrdersEditScreen-module_orders-AxDvj",children:(0,a.jsx)(ke,{doFetch:l,items:o,render:m,oneObserve:!0})}),(0,a.jsx)("div",{className:"OrdersEditScreen-module_products-Ec_7b",children:t&&t.products.map((e=>(0,a.jsx)("div",{children:(0,a.jsx)(ot,{photo:e.product.photo,name:e.product.name,price:e.product.price,quantity:e.quantity})},e._id)))})]})})})}),{})},{label:"Routes.Edit.Categories.label",authenticationState:Ae.AdminAuthenticated,path:"/categories",element:(0,a.jsx)((()=>{const{t:e}=(0,P.Bd)(),[t]=(0,s.useState)({id:"",name:"",photo:""}),{items:r,handlerFiltersChange:o,handlerFetchItems:n,isSuccess:i,error:l,editingItem:d,handlerEditItem:c,handlerAddClick:u,handlerEditClick:m,clearEditItem:h}=it(St,At,_t),p=(0,s.useCallback)((e=>(0,a.jsx)("div",{className:(0,C.A)("CategoriesEditScreen-module_item-SJZIs"),children:(0,a.jsx)(zt,{onEdit:()=>m(e),name:e.name,photo:e.photo})},e.id)),[]);return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(lt,{header:(0,a.jsx)(re,{className:"CategoriesEditScreen-module_addButton-RyuJp",lable:"Add category",onClick:()=>u(t),disabled:!i}),sidebar:(0,a.jsx)(a.Fragment,{children:(0,a.jsx)(Ut,{initialFilters:{},onChange:o})}),footer:l&&(0,a.jsx)("div",{className:"CategoriesEditScreen-module_footer-Vm0Gi",children:(0,a.jsx)("div",{className:"CategoriesEditScreen-module_error-bSt4z",children:l.map((t=>e(t))).join("\n")})}),children:(0,a.jsx)(ke,{items:r,doFetch:n,render:p,oneObserve:!0})}),d&&(0,a.jsx)(Wt,{setVisible:e=>e?null:h(),visible:null!==d,children:(0,a.jsx)(Bt,{defaultValues:{name:d.name,photo:d.photo?{url:d.photo}:void 0},onSubmit:e=>{const{photo:t}=e,r=function(e,t){var r={};for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&t.indexOf(a)<0&&(r[a]=e[a]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var s=0;for(a=Object.getOwnPropertySymbols(e);s<a.length;s++)t.indexOf(a[s])<0&&Object.prototype.propertyIsEnumerable.call(e,a[s])&&(r[a[s]]=e[a[s]])}return r}(e,["photo"]);c(d.id,Object.assign(Object.assign({},r),{photo:null==t?void 0:t.url})),h()}})})]})}),{})},{label:"Routes.Edit.Products.label",authenticationState:Ae.AdminAuthenticated,path:"/products",element:(0,a.jsx)((()=>{var e;const{t}=(0,P.Bd)(),[r]=(0,s.useState)({id:null,category:null,name:"",price:0}),[o,n]=(0,s.useState)([]),i=(0,s.useRef)(!0),{data:l,isFetching:d,isSuccess:c}=St({},{skip:!i.current}),u=null==l?void 0:l.data,m=null==l?void 0:l.pagination;(0,s.useEffect)((()=>{!u||d||1===(null==m?void 0:m.pageNumber)&&!i.current||(n((e=>[...e,...u])),i.current=!1)}),[u,m,d]);const[h,p]=(0,s.useState)([]);(0,s.useEffect)((()=>{p(o.map((e=>e.name)))}),[o]);const{items:g,currentFilters:j,handlerFiltersChange:v,handlerFetchItems:x,isLoading:b,error:y,editingItem:f,handlerEditItem:S,handlerAddClick:A,handlerEditClick:_,clearEditItem:N}=it(Et,Ot,wt),E=(0,s.useCallback)((e=>(0,a.jsx)("div",{className:(0,C.A)(Yt.item),children:(0,a.jsx)(Xt,{name:e.name,desc:e.desc,price:e.price,photo:e.photo,withButton:!1,onEdit:()=>_(e)})},e.id)),[]);return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(lt,{footer:(0,a.jsx)(a.Fragment,{children:y&&(0,a.jsx)("div",{className:Yt.footer,children:(0,a.jsx)("div",{className:Yt.error,children:y.map((e=>t(e))).join("\n")})})}),header:(0,a.jsx)(a.Fragment,{children:(0,a.jsx)(re,{className:Yt.addButton,lable:"Add product",onClick:()=>A(r),disabled:b})}),sidebar:c?(0,a.jsx)(a.Fragment,{children:(0,a.jsx)(Qt,{initialFilters:j,onChange:v,categories:o})}):(0,a.jsx)(H,{}),children:(0,a.jsx)("div",{className:(0,C.A)(Yt.list),children:(0,a.jsx)(ke,{items:g,doFetch:x,render:E,oneObserve:!0})})}),f&&(0,a.jsx)(Wt,{setVisible:e=>e?null:N(),visible:null!==f,children:(0,a.jsx)(Ht,{defaultValues:{name:f.name,price:f.price,description:f.desc,category:null===(e=f.category)||void 0===e?void 0:e.name,oldPrice:f.oldPrice,photo:f.photo?{url:f.photo}:void 0},categories:h,onSubmit:e=>{var t,r;const a=null!==(r=null===(t=null==o?void 0:o.find((t=>t.name===e.category)))||void 0===t?void 0:t.id)&&void 0!==r?r:"",{category:s,description:n,photo:i}=e,l=function(e,t){var r={};for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&t.indexOf(a)<0&&(r[a]=e[a]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var s=0;for(a=Object.getOwnPropertySymbols(e);s<a.length;s++)t.indexOf(a[s])<0&&Object.prototype.propertyIsEnumerable.call(e,a[s])&&(r[a[s]]=e[a[s]])}return r}(e,["category","description","photo"]);S(f.id,Object.assign(Object.assign({},l),{desc:n,categoryId:a,photo:null==i?void 0:i.url})),N()}})})]})}),{})}]}],yr=[{label:"Routes.Auth.label",dropdown:[{label:"Routes.Auth.SignIn.label",authenticationState:Ae.Unauthenticated,path:"/auth/SignIn",element:(0,a.jsx)(ce,{authAction:de.SignIn})},{label:"Routes.Auth.SignUp.label",authenticationState:Ae.Unauthenticated,path:"/auth/SignUp",element:(0,a.jsx)(ce,{authAction:de.SignUp})},{label:"Routes.Auth.SignOut.label",authenticationState:Ae.Authenticated,path:"/auth/SignOut",element:(0,a.jsx)(ce,{authAction:de.SignOut})}]}],fr=[...vr,...xr,{label:"Routes.Profile.label",authenticationState:Ae.Authenticated,path:"/profile",element:(0,a.jsx)((()=>{const{t:e}=(0,P.Bd)(),{data:t,isLoading:r,isUninitialized:o,error:n}=or(),[i,{error:l}]=nr(),[d,{error:c}]=ir(),u=(0,s.useCallback)(((e,t)=>lr(void 0,void 0,void 0,(function*(){null==t||t.preventDefault(),yield i({name:e.userName})}))),[]),m=(0,s.useCallback)(((e,t)=>lr(void 0,void 0,void 0,(function*(){null==t||t.preventDefault(),yield d({password:e.oldPassword,newPassword:e.newPassword})}))),[]);if(o||r)return(0,a.jsx)(H,{});const h=[...n||[],...l||[],...c||[]];return(0,a.jsxs)("div",{className:(0,C.A)("ProfileScreen-module_page-Ap_DT"),children:[(0,a.jsx)("h1",{className:(0,C.A)("ProfileScreen-module_title-Qh_1l"),children:e("ProfileScreen.title")}),(0,a.jsx)("div",{children:(0,a.jsx)(ar,{onSubmit:u,defaultValues:t&&{userName:null==t?void 0:t.name}})}),(0,a.jsx)("div",{children:(0,a.jsx)(tr,{onSubmit:m})}),h&&(0,a.jsx)("div",{className:"ProfileScreen-module_error-uKEst",children:h.map((t=>e(t))).join("\n")})]})}),{})},...br,...yr];class Cr extends s.Component{constructor(){super(...arguments),Object.defineProperty(this,"state",{enumerable:!0,configurable:!0,writable:!0,value:{hasError:!1,error:null}}),Object.defineProperty(this,"handlerRetry",{enumerable:!0,configurable:!0,writable:!0,value:()=>{this.setState({error:null})}})}static getDerivedStateFromError(e){return T(e)?{hasError:!0,error:new Error(V(e).join(",\n"))}:Pr(e)?{hasError:!0,error:new Error(e.message)}:{hasError:!0,error:new Error("Unknown error.")}}componentDidCatch(e,t){console.error("ErrorBoundary caught an error:",e,t)}render(){return this.state.error?(console.log("try render error boundary"),(0,a.jsxs)("div",{style:{display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center"},children:[(0,a.jsx)("span",{children:"Здесь могла быть ваша реклама"}),(0,a.jsx)("span",{children:this.state.error.message}),(0,a.jsx)("button",{onClick:this.handlerRetry,children:"Перепытаться"})]})):this.props.children}}const Pr=e=>"object"==typeof e&&null!==e&&"message"in e&&"string"==typeof e.message,Sr=({children:e})=>{const t=(0,f.Zp)();return(0,s.useEffect)((()=>{W=t}),[t]),(0,a.jsx)(a.Fragment,{children:e})},Ar=Y.middleware,_r=Y.reducer,Nr=Y.reducerPath,Er=(0,O.U1)({reducer:{[Nr]:_r,auth:U,cart:gt},middleware:e=>e().concat(Ar),devTools:!1}),Or=({children:e})=>{const{i18n:t}=(0,P.Bd)(),[r,o]=(0,s.useState)(t.language);return(0,a.jsx)(fe.Provider,{value:{currentLanguage:r,switchLanguage:e=>{t.changeLanguage(e),o(e)}},children:e})},wr=({children:e})=>{const[t,r]=(0,s.useState)(Re);return(0,s.useEffect)((()=>{var e,r;null===(r=null===(e=null===document||void 0===document?void 0:document.body)||void 0===e?void 0:e.parentElement)||void 0===r||r.setAttribute("data-theme",t)}),[t]),(0,a.jsx)(Ie.Provider,{value:{theme:t,toggleTheme:()=>{r((e=>e===Re?"dark":Re))}},children:e})};o.createRoot(document.getElementById("root")).render((0,a.jsx)(s.StrictMode,{children:(0,a.jsx)(y.Kq,{store:Er,children:(0,a.jsx)(f.I9,{children:(0,a.jsx)((()=>{const e=(0,y.wA)();(0,s.useEffect)((()=>{if(N()){const t=N();e(F({token:t}))}window.addEventListener("storage",(e=>{if(e.key===A)if(e.newValue){const e=_();Er.dispatch(F({token:e}))}else Er.dispatch(q())}))}),[]);const t=(e,r,o)=>[...e.map((e=>{var n,i;return e.dropdown?(0,a.jsxs)(s.Fragment,{children:[(0,a.jsx)(f.qh,{path:null!==(n=e.path)&&void 0!==n?n:void 0,element:(0,a.jsx)(_e,{authenticationState:e.authenticationState,routes:{root:r,signIn:o},children:e.element})}),t(e.dropdown,r,o)]},e.path+e.label):(0,a.jsx)(s.Fragment,{children:(0,a.jsx)(f.qh,{path:null!==(i=e.path)&&void 0!==i?i:void 0,element:(0,a.jsx)(_e,{authenticationState:e.authenticationState,routes:{root:r,signIn:o},children:e.element})})},e.path+e.label)}))];return(0,a.jsx)(wr,{children:(0,a.jsx)(Or,{children:(0,a.jsx)(Sr,{children:(0,a.jsx)(Cr,{children:(0,a.jsx)("div",{className:(0,C.A)("App-module_app-dEm8E"),children:(0,a.jsx)(f.BV,{children:(0,a.jsxs)(f.qh,{path:"/",element:(0,a.jsx)(qe,{menuItems:fr}),children:[t(fr,"/","/auth/SignIn"),(0,a.jsx)(f.qh,{path:k,element:(0,a.jsx)(ce,{authAction:de.SignIn})})]})})})})})})})}),{})})})}))}},e=>{e.O(0,[670],(()=>e(e.s=3))),e.O()}]);
//# sourceMappingURL=main.6a625b1facc7483d3eb6.js.map